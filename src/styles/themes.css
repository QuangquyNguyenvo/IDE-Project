/**
 * C++ IDE - Theme Definitions
 * 
 * Contains color scheme definitions for dark themes:
 * - Kawaii Dark: Ocean-inspired dark palette
 * - Dracula: Classic purple/cyan theme
 * - Monokai: Vibrant syntax highlighting colors
 * - Nord: Arctic-inspired cool palette
 * - One Dark Pro: Popular VS Code theme port
 * 
 * Themes are applied via data-theme attribute on document root.
 * Light theme uses default styles from theme.css.
 * 
 * @author Project IDE Team
 * @license MIT
 */

/* ============================================================================
   KAWAII DARK THEME
   ============================================================================ */
[data-theme="kawaii-dark"] {
    /* Ocean-inspired dark palette */
    --bg-ocean-light: #2a3a4a;
    --bg-ocean-medium: #1e2d3d;
    --bg-ocean-deep: #88c9ea;
    --bg-ocean-dark: #152535;

    --bg-glass: rgba(26, 37, 48, 0.92);
    --bg-glass-heavy: rgba(37, 64, 90, 0.97);
    --bg-glass-border: rgba(40, 60, 80, 0.9);

    --accent: #88c9ea;
    --accent-hover: #5eb7e0;
    --text-primary: #e0f0ff;
    --text-secondary: #a0c0d0;
    --text-muted: #7990a0;

    --success: #7dcea0;
    --error: #ff6b6b;
    --warning: #fcd5ce;

    --border: #3a6075;
    --border-strong: #88c9ea;

    --shadow-soft: 0 8px 16px rgba(0, 0, 0, 0.4);
    --shadow-card: 0 4px 8px rgba(0, 0, 0, 0.3);

    --bg-header: rgba(21, 37, 53, 0.97);
    /* Header Variants - Inherit from base unless overridden */
    --bg-header-main: var(--bg-header);
    --bg-header-statusbar: var(--bg-header);

    --bg-panel: rgba(26, 37, 48, 0.95);
    /* Panel Variants - Inherit from base unless overridden */
    --bg-panel-problems: var(--bg-panel);
    --bg-panel-input: var(--bg-panel);
    --bg-panel-expected: var(--bg-panel);

    --bg-input: #1a2a3a;
    --bg-button: #2a4050;
    --bg-button-hover: #3a5565;

    --editor-bg: #1a2530;
    --terminal-bg: #1e2933;

    /* Button Variables - Dark Theme */
    --btn-bg: rgba(255, 255, 255, 0.1);
    --btn-bg-hover: rgba(255, 255, 255, 0.15);
    --btn-border: var(--border);
    --btn-text: var(--text-primary);
    --btn-text-hover: var(--accent);

    /* Settings label text */
    --settings-label-color: #e0f0ff;
    --settings-section-color: #88c9ea;
}

/* ============================================================================
   KAWAII LIGHT THEME
   Terminal still uses dark background for readability
   ============================================================================ */
[data-theme="kawaii-light"] {
    --terminal-bg: #1e2933;
    --terminal-text: #e0f0ff;
}

/* ============================================================================
   SAKURA THEME
   Pink pastel UI with dark rose editor for comfort coding
   ============================================================================ */
[data-theme="sakura"] {
    /* Sakura pink palette - Refined for true pastel feel */
    --bg-ocean-light: #fff5f8;
    --bg-ocean-medium: #ffe4e1;
    --bg-ocean-deep: #ffb7c5;
    --bg-ocean-dark: #e097a8;

    --bg-glass: rgba(255, 245, 250, 0.92);
    --bg-glass-heavy: rgba(255, 228, 225, 0.97);
    --bg-glass-border: rgba(255, 182, 193, 0.6);

    --accent: #ff9aaf;
    --accent-hover: #ff758f;
    --text-primary: #5d4a4d;
    --text-secondary: #8b5f65;
    --text-muted: #bc8f8f;

    --success: #b8e2b8;
    --error: #ffb3b3;
    --warning: #fff9c4;

    --border: #ffcad4;
    --border-strong: #ffb7c5;

    --shadow-soft: 0 8px 16px rgba(255, 182, 193, 0.25);
    --shadow-card: 0 4px 8px rgba(255, 105, 180, 0.15);

    --bg-header: rgba(255, 228, 225, 0.97);
    /* Header Variants - Inherit from base unless overridden */
    --bg-header-main: var(--bg-header);
    --bg-header-statusbar: var(--bg-header);

    --bg-panel: rgba(255, 245, 248, 0.95);
    /* Panel Variants - Inherit from base unless overridden */
    --bg-panel-problems: var(--bg-panel);
    --bg-panel-input: var(--bg-panel);
    --bg-panel-expected: var(--bg-panel);

    --bg-input: #fffafa;
    --bg-button: #fff0f5;
    --bg-button-hover: #ffe4e1;

    --editor-bg: #2d1f2f;
    --terminal-bg: #251a26;
    --terminal-text: #f8e8f0;

    /* Settings label text */
    --settings-label-color: #8b5f65;
    --settings-section-color: #ff9aaf;
}

/* Custom Toggle for Sakura (True Pastel) */
[data-theme="sakura"] .switch input:checked+.slider {
    background: #ffc2d1;
    border-color: #ffb7c5;
}

[data-theme="sakura"] .switch input:checked+.slider::before {
    background: white;
    filter: drop-shadow(0 0 4px #ffb7c5);
}

/* ============================================================================
   DRACULA THEME
   ============================================================================ */
[data-theme="dracula"] {
    --bg-ocean-light: #44475a;
    --bg-ocean-medium: #383a59;
    --bg-ocean-deep: #bd93f9;
    --bg-ocean-dark: #21222c;

    --bg-glass: rgba(40, 42, 54, 0.95);
    --bg-glass-heavy: rgba(33, 34, 44, 0.97);
    --bg-glass-border: rgba(68, 71, 90, 0.9);

    --accent: #ff79c6;
    --accent-hover: #ff92d0;
    --text-primary: #f8f8f2;
    --text-secondary: #bd93f9;
    --text-muted: #6272a4;

    --success: #50fa7b;
    --error: #ff5555;
    --warning: #ffb86c;

    --border: #6272a4;
    --border-strong: #bd93f9;

    --shadow-soft: 0 8px 16px rgba(0, 0, 0, 0.5);
    --shadow-card: 0 4px 8px rgba(0, 0, 0, 0.4);

    --bg-header: rgba(33, 34, 44, 0.97);
    /* Header Variants - Inherit from base unless overridden */
    --bg-header-main: var(--bg-header);
    --bg-header-statusbar: var(--bg-header);

    --bg-panel: rgba(40, 42, 54, 0.95);
    /* Panel Variants - Inherit from base unless overridden */
    --bg-panel-problems: var(--bg-panel);
    --bg-panel-input: var(--bg-panel);
    --bg-panel-expected: var(--bg-panel);

    --bg-input: #282a36;
    --bg-button: #44475a;
    --bg-button-hover: #6272a4;

    --editor-bg: #282a36;
    --terminal-bg: #21222c;

    /* Button Variables - Dark Theme */
    --btn-bg: rgba(255, 255, 255, 0.1);
    --btn-bg-hover: rgba(255, 255, 255, 0.15);
    --btn-border: var(--border);
    --btn-text: var(--text-primary);
    --btn-text-hover: var(--accent);

    /* Settings label text */
    --settings-label-color: #f8f8f2;
    --settings-section-color: #bd93f9;
}

/* ============================================================================
   MONOKAI THEME
   ============================================================================ */
[data-theme="monokai"] {
    --bg-ocean-light: #3e3d32;
    --bg-ocean-medium: #49483e;
    --bg-ocean-deep: #a6e22e;
    --bg-ocean-dark: #272822;

    --bg-glass: rgba(39, 40, 34, 0.95);
    --bg-glass-heavy: rgba(30, 31, 28, 0.97);
    --bg-glass-border: rgba(62, 61, 50, 0.9);

    --accent: #f92672;
    --accent-hover: #ff4d8f;
    --text-primary: #f8f8f2;
    --text-secondary: #e6db74;
    --text-muted: #75715e;

    --success: #a6e22e;
    --error: #f92672;
    --warning: #fd971f;

    --border: #75715e;
    --border-strong: #a6e22e;

    --shadow-soft: 0 8px 16px rgba(0, 0, 0, 0.5);
    --shadow-card: 0 4px 8px rgba(0, 0, 0, 0.4);

    --bg-header: rgba(30, 31, 28, 0.97);
    /* Header Variants - Inherit from base unless overridden */
    --bg-header-main: var(--bg-header);
    --bg-header-statusbar: var(--bg-header);

    --bg-panel: rgba(39, 40, 34, 0.95);
    /* Panel Variants - Inherit from base unless overridden */
    --bg-panel-problems: var(--bg-panel);
    --bg-panel-input: var(--bg-panel);
    --bg-panel-expected: var(--bg-panel);

    --bg-input: #272822;
    --bg-button: #3e3d32;
    --bg-button-hover: #49483e;

    --editor-bg: #272822;
    --terminal-bg: #1e1f1c;

    /* Button Variables - Dark Theme */
    --btn-bg: rgba(255, 255, 255, 0.08);
    --btn-bg-hover: rgba(255, 255, 255, 0.12);
    --btn-border: var(--border);
    --btn-text: var(--text-primary);
    --btn-text-hover: var(--accent);

    /* Settings label text */
    --settings-label-color: #f8f8f2;
    --settings-section-color: #a6e22e;
}

/* ============================================================================
   NORD THEME
   ============================================================================ */
[data-theme="nord"] {
    --bg-ocean-light: #3b4252;
    --bg-ocean-medium: #434c5e;
    --bg-ocean-deep: #88c0d0;
    --bg-ocean-dark: #2e3440;

    --bg-glass: rgba(46, 52, 64, 0.95);
    --bg-glass-heavy: rgba(36, 41, 51, 0.97);
    --bg-glass-border: rgba(59, 66, 82, 0.9);

    --accent: #88c0d0;
    --accent-hover: #81a1c1;
    --text-primary: #eceff4;
    --text-secondary: #8fbcbb;
    --text-muted: #d8dee9;

    --success: #a3be8c;
    --error: #bf616a;
    --warning: #ebcb8b;

    --border: #81a1c1;
    --border-strong: #88c0d0;

    --shadow-soft: 0 8px 16px rgba(0, 0, 0, 0.4);
    --shadow-card: 0 4px 8px rgba(0, 0, 0, 0.3);

    --bg-header: rgba(36, 41, 51, 0.97);
    /* Header Variants - Inherit from base unless overridden */
    --bg-header-main: var(--bg-header);
    --bg-header-statusbar: var(--bg-header);

    --bg-panel: rgba(46, 52, 64, 0.95);
    /* Panel Variants - Inherit from base unless overridden */
    --bg-panel-problems: var(--bg-panel);
    --bg-panel-input: var(--bg-panel);
    --bg-panel-expected: var(--bg-panel);

    --bg-input: #2e3440;
    --bg-button: #3b4252;
    --bg-button-hover: #434c5e;

    --editor-bg: #2e3440;
    --terminal-bg: #242931;

    /* Button Variables - Dark Theme */
    --btn-bg: rgba(255, 255, 255, 0.08);
    --btn-bg-hover: rgba(255, 255, 255, 0.12);
    --btn-border: var(--border);
    --btn-text: var(--text-primary);
    --btn-text-hover: var(--accent);

    /* Settings label text */
    --settings-label-color: #eceff4;
    --settings-section-color: #88c0d0;
}

/* ============================================================================
   DARK THEME COMPONENT STYLES
   ============================================================================ */
/* Header styles for all themes - use --bg-header from theme */
[data-theme] .header-bar {
    background: var(--bg-header);
    border-bottom: 2px solid var(--border);
}

[data-theme="kawaii-dark"] .logo,
[data-theme="dracula"] .logo,
[data-theme="monokai"] .logo,
[data-theme="nord"] .logo {
    background: var(--bg-ocean-deep);
    border: 2px solid var(--border);
    color: var(--bg-ocean-dark);
}

[data-theme="kawaii-dark"] .menu-group,
[data-theme="dracula"] .menu-group,
[data-theme="monokai"] .menu-group,
[data-theme="nord"] .menu-group {
    background: var(--bg-button);
}

[data-theme="kawaii-dark"] .menu-btn,
[data-theme="dracula"] .menu-btn,
[data-theme="monokai"] .menu-btn,
[data-theme="nord"] .menu-btn {
    color: var(--text-secondary);
}

[data-theme="kawaii-dark"] .menu-btn:hover,
[data-theme="dracula"] .menu-btn:hover,
[data-theme="monokai"] .menu-btn:hover,
[data-theme="nord"] .menu-btn:hover {
    background: var(--bg-button-hover);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .menu-btn.active,
[data-theme="dracula"] .menu-btn.active,
[data-theme="monokai"] .menu-btn.active,
[data-theme="nord"] .menu-btn.active {
    background: var(--bg-ocean-deep);
    color: var(--bg-ocean-dark);
}

/* Tabs */
[data-theme="kawaii-dark"] .tab,
[data-theme="dracula"] .tab,
[data-theme="monokai"] .tab,
[data-theme="nord"] .tab {
    background: var(--bg-button);
    border: 2px solid var(--border);
    color: var(--text-secondary);
}

[data-theme="kawaii-dark"] .tab:hover,
[data-theme="dracula"] .tab:hover,
[data-theme="monokai"] .tab:hover,
[data-theme="nord"] .tab:hover {
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .tab.active,
[data-theme="dracula"] .tab.active,
[data-theme="monokai"] .tab.active,
[data-theme="nord"] .tab.active {
    background: var(--bg-ocean-medium);
    border-color: var(--bg-ocean-deep);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .tab-add,
[data-theme="dracula"] .tab-add,
[data-theme="monokai"] .tab-add,
[data-theme="nord"] .tab-add {
    background: var(--bg-button);
    border-color: var(--border);
    color: var(--bg-ocean-deep);
}

[data-theme="kawaii-dark"] .tab-add:hover,
[data-theme="dracula"] .tab-add:hover,
[data-theme="monokai"] .tab-add:hover,
[data-theme="nord"] .tab-add:hover {
    background: var(--bg-ocean-medium);
}

/* Tab drag and drop indicators for dark themes */
[data-theme="kawaii-dark"] .tab.dragging,
[data-theme="dracula"] .tab.dragging,
[data-theme="monokai"] .tab.dragging,
[data-theme="nord"] .tab.dragging {
    opacity: 0.5;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
}

[data-theme="kawaii-dark"] .tab.drag-over-left::before,
[data-theme="kawaii-dark"] .tab.drag-over-right::after,
[data-theme="dracula"] .tab.drag-over-left::before,
[data-theme="dracula"] .tab.drag-over-right::after,
[data-theme="monokai"] .tab.drag-over-left::before,
[data-theme="monokai"] .tab.drag-over-right::after,
[data-theme="nord"] .tab.drag-over-left::before,
[data-theme="nord"] .tab.drag-over-right::after {
    background: var(--bg-ocean-deep);
}

/* Split tab indicator for dark themes */
[data-theme="kawaii-dark"] .tab.split,
[data-theme="dracula"] .tab.split,
[data-theme="monokai"] .tab.split,
[data-theme="nord"] .tab.split {
    border-style: dashed;
    border-color: var(--bg-ocean-deep);
}

/* Focused tab indicator for dark themes */
[data-theme="kawaii-dark"] .tab.focused,
[data-theme="dracula"] .tab.focused,
[data-theme="monokai"] .tab.focused,
[data-theme="nord"] .tab.focused {
    box-shadow: 0 0 0 2px var(--bg-ocean-deep), 0 4px 12px rgba(0, 0, 0, 0.4);
}

[data-theme="kawaii-dark"] .tab.focused::before,
[data-theme="dracula"] .tab.focused::before,
[data-theme="monokai"] .tab.focused::before,
[data-theme="nord"] .tab.focused::before {
    background: var(--bg-ocean-deep);
}

/* Hamburger button for dark themes */
[data-theme="kawaii-dark"] .hamburger-btn,
[data-theme="dracula"] .hamburger-btn,
[data-theme="monokai"] .hamburger-btn,
[data-theme="nord"] .hamburger-btn {
    background: var(--bg-button);
    border-color: var(--border);
    color: var(--bg-ocean-deep);
}

[data-theme="kawaii-dark"] .hamburger-btn:hover,
[data-theme="dracula"] .hamburger-btn:hover,
[data-theme="monokai"] .hamburger-btn:hover,
[data-theme="nord"] .hamburger-btn:hover {
    background: var(--bg-button-hover);
}

[data-theme="kawaii-dark"] .hamburger-btn.active,
[data-theme="dracula"] .hamburger-btn.active,
[data-theme="monokai"] .hamburger-btn.active,
[data-theme="nord"] .hamburger-btn.active {
    background: var(--bg-ocean-medium);
}

/* Toggle & Action buttons */
[data-theme="kawaii-dark"] .toggle-btn,
[data-theme="dracula"] .toggle-btn,
[data-theme="monokai"] .toggle-btn,
[data-theme="nord"] .toggle-btn {
    background: var(--bg-button);
    color: var(--bg-ocean-deep);
}

[data-theme="kawaii-dark"] .toggle-btn:hover,
[data-theme="dracula"] .toggle-btn:hover,
[data-theme="monokai"] .toggle-btn:hover,
[data-theme="nord"] .toggle-btn:hover {
    background: var(--bg-button-hover);
}

[data-theme="kawaii-dark"] .toggle-btn.active,
[data-theme="dracula"] .toggle-btn.active,
[data-theme="monokai"] .toggle-btn.active,
[data-theme="nord"] .toggle-btn.active {
    background: var(--bg-ocean-deep);
    color: var(--bg-ocean-dark);
}

[data-theme="kawaii-dark"] .action-btn,
[data-theme="dracula"] .action-btn,
[data-theme="monokai"] .action-btn,
[data-theme="nord"] .action-btn {
    background: var(--bg-button);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .action-btn:hover,
[data-theme="dracula"] .action-btn:hover,
[data-theme="monokai"] .action-btn:hover,
[data-theme="nord"] .action-btn:hover {
    background: var(--bg-button-hover);
}

[data-theme="kawaii-dark"] .action-btn.primary,
[data-theme="dracula"] .action-btn.primary,
[data-theme="monokai"] .action-btn.primary,
[data-theme="nord"] .action-btn.primary {
    background: var(--bg-ocean-deep);
    border-color: var(--bg-ocean-deep);
    color: var(--bg-ocean-dark);
}

/* Window buttons */
[data-theme="kawaii-dark"] .win-btn,
[data-theme="dracula"] .win-btn,
[data-theme="monokai"] .win-btn,
[data-theme="nord"] .win-btn {
    color: var(--text-secondary);
}

[data-theme="kawaii-dark"] .win-btn:hover,
[data-theme="dracula"] .win-btn:hover,
[data-theme="monokai"] .win-btn:hover,
[data-theme="nord"] .win-btn:hover {
    background: var(--bg-ocean-medium);
    color: var(--text-primary);
}

/* Editor section - Dark themes */
[data-theme="kawaii-dark"] .editor-section,
[data-theme="dracula"] .editor-section,
[data-theme="monokai"] .editor-section,
[data-theme="nord"] .editor-section {
    background: var(--editor-bg);
    border: 2px solid var(--border) !important;
}

[data-theme="kawaii-dark"] .editor-pane,
[data-theme="dracula"] .editor-pane,
[data-theme="monokai"] .editor-pane,
[data-theme="nord"] .editor-pane {
    background: var(--editor-bg);
}

[data-theme="kawaii-dark"] .editor-area,
[data-theme="dracula"] .editor-area,
[data-theme="monokai"] .editor-area,
[data-theme="nord"] .editor-area {
    background-color: var(--editor-bg);
    background-image: var(--editor-bg-image, none);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

/* Editor section - Light themes */
[data-theme="kawaii-light"] .editor-section {
    background: var(--bg-panel);
    border: 2px solid var(--border) !important;
}

[data-theme="kawaii-light"] .editor-pane {
    background: var(--bg-panel);
}

[data-theme="kawaii-light"] .editor-area {
    background-color: var(--editor-bg);
    background-image: var(--editor-bg-image, none);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

/* Terminal section - kawaii-light (needs light text on dark terminal bg) */
[data-theme="kawaii-light"] .terminal-section {
    background: var(--bg-panel);
    border: 2px solid var(--border);
}

[data-theme="kawaii-light"] .terminal-body {
    background: var(--terminal-bg);
    color: var(--terminal-text, #e0f0ff);
    opacity: var(--terminal-opacity, 1);
    backdrop-filter: blur(var(--terminal-bg-blur, 0px));
    -webkit-backdrop-filter: blur(var(--terminal-bg-blur, 0px));
}

[data-theme="kawaii-light"] .terminal-body .line.success {
    color: #a3d9a5;
}

[data-theme="kawaii-light"] .terminal-body .line.error {
    color: #ff8fab;
}

[data-theme="kawaii-light"] .terminal-body .line.warning {
    color: #ebcb8b;
}

[data-theme="kawaii-light"] .terminal-body .line.info {
    color: #88c9ea;
}

[data-theme="kawaii-light"] .terminal-body .line.system {
    color: #6a8a9a;
}

[data-theme="kawaii-light"] .terminal-input {
    background: var(--terminal-bg);
    border-top-color: var(--border);
}

[data-theme="kawaii-light"] .terminal-input input,
[data-theme="kawaii-light"] .terminal-input textarea {
    color: var(--terminal-text, #e0f0ff);
}

[data-theme="kawaii-light"] .terminal-input input::placeholder,
[data-theme="kawaii-light"] .terminal-input textarea::placeholder {
    color: #6a8a9a;
}

/* Terminal section */
[data-theme="kawaii-dark"] .terminal-section,
[data-theme="dracula"] .terminal-section,
[data-theme="monokai"] .terminal-section,
[data-theme="nord"] .terminal-section {
    background: var(--bg-panel);
    border: 2px solid var(--border);
}

[data-theme="kawaii-dark"] .terminal-body,
[data-theme="dracula"] .terminal-body,
[data-theme="monokai"] .terminal-body,
[data-theme="nord"] .terminal-body {
    background: var(--terminal-bg);
    color: var(--text-primary);
    opacity: var(--terminal-opacity, 1);
    /* Acrylic blur effect */
    backdrop-filter: blur(var(--terminal-bg-blur, 0px));
    -webkit-backdrop-filter: blur(var(--terminal-bg-blur, 0px));
}

[data-theme="kawaii-dark"] .terminal-input,
[data-theme="dracula"] .terminal-input,
[data-theme="monokai"] .terminal-input,
[data-theme="nord"] .terminal-input {
    background: var(--terminal-bg);
    border-top-color: var(--border);
}

[data-theme="kawaii-dark"] .terminal-input input,
[data-theme="kawaii-dark"] .terminal-input textarea,
[data-theme="dracula"] .terminal-input input,
[data-theme="dracula"] .terminal-input textarea,
[data-theme="monokai"] .terminal-input input,
[data-theme="monokai"] .terminal-input textarea,
[data-theme="nord"] .terminal-input input,
[data-theme="nord"] .terminal-input textarea {
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .terminal-input input::placeholder,
[data-theme="kawaii-dark"] .terminal-input textarea::placeholder,
[data-theme="dracula"] .terminal-input input::placeholder,
[data-theme="dracula"] .terminal-input textarea::placeholder,
[data-theme="monokai"] .terminal-input input::placeholder,
[data-theme="monokai"] .terminal-input textarea::placeholder,
[data-theme="nord"] .terminal-input input::placeholder,
[data-theme="nord"] .terminal-input textarea::placeholder {
    color: var(--text-muted);
}

/* IO Panels */
[data-theme="kawaii-dark"] .io-panel,
[data-theme="dracula"] .io-panel,
[data-theme="monokai"] .io-panel,
[data-theme="nord"] .io-panel {
    background: var(--bg-panel);
    border: 2px solid var(--border);
}

[data-theme="kawaii-dark"] .panel-head,
[data-theme="dracula"] .panel-head,
[data-theme="monokai"] .panel-head,
[data-theme="nord"] .panel-head {
    background: var(--bg-glass-heavy);
    border-bottom: 2px solid var(--border);
}

[data-theme="kawaii-dark"] .panel-title,
[data-theme="dracula"] .panel-title,
[data-theme="monokai"] .panel-title,
[data-theme="nord"] .panel-title {
    color: var(--text-secondary);
}

[data-theme="kawaii-dark"] .panel-title:hover,
[data-theme="dracula"] .panel-title:hover,
[data-theme="monokai"] .panel-title:hover,
[data-theme="nord"] .panel-title:hover {
    background: var(--bg-button-hover);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .panel-textarea,
[data-theme="dracula"] .panel-textarea,
[data-theme="monokai"] .panel-textarea,
[data-theme="nord"] .panel-textarea {
    background: var(--bg-input);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .panel-textarea::placeholder,
[data-theme="dracula"] .panel-textarea::placeholder,
[data-theme="monokai"] .panel-textarea::placeholder,
[data-theme="nord"] .panel-textarea::placeholder {
    color: var(--text-muted);
}

/* Problems panel */
[data-theme="kawaii-dark"] .problems-panel,
[data-theme="dracula"] .problems-panel,
[data-theme="monokai"] .problems-panel,
[data-theme="nord"] .problems-panel {
    background: var(--bg-panel);
    border-top: 2px solid var(--border);
}

[data-theme="kawaii-dark"] .problems-body,
[data-theme="dracula"] .problems-body,
[data-theme="monokai"] .problems-body,
[data-theme="nord"] .problems-body {
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .problem-item,
[data-theme="dracula"] .problem-item,
[data-theme="monokai"] .problem-item,
[data-theme="nord"] .problem-item {
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .problem-item:hover,
[data-theme="dracula"] .problem-item:hover,
[data-theme="monokai"] .problem-item:hover,
[data-theme="nord"] .problem-item:hover {
    background: var(--bg-button-hover);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .problem-count,
[data-theme="dracula"] .problem-count,
[data-theme="monokai"] .problem-count,
[data-theme="nord"] .problem-count {
    background: var(--bg-button);
    color: var(--text-secondary);
}

/* Status bar */
[data-theme="kawaii-dark"] .status-bar,
[data-theme="dracula"] .status-bar,
[data-theme="monokai"] .status-bar,
[data-theme="nord"] .status-bar {
    background: var(--bg-header);
    border-top-color: var(--border);
    color: var(--text-secondary);
}

/* Dropdowns */
[data-theme="kawaii-dark"] .dropdown,
[data-theme="dracula"] .dropdown,
[data-theme="monokai"] .dropdown,
[data-theme="nord"] .dropdown {
    background: var(--bg-panel);
    border-color: var(--border);
}

[data-theme="kawaii-dark"] .dropdown-item,
[data-theme="dracula"] .dropdown-item,
[data-theme="monokai"] .dropdown-item,
[data-theme="kawaii-dark"] .dropdown-item,
[data-theme="dracula"] .dropdown-item,
[data-theme="monokai"] .dropdown-item,
[data-theme="nord"] .dropdown-item {
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .dropdown-item:hover,
[data-theme="dracula"] .dropdown-item:hover,
[data-theme="monokai"] .dropdown-item:hover,
[data-theme="kawaii-dark"] .dropdown-item:hover,
[data-theme="dracula"] .dropdown-item:hover,
[data-theme="monokai"] .dropdown-item:hover,
[data-theme="nord"] .dropdown-item:hover {
    background: var(--bg-button-hover);
}

[data-theme="kawaii-dark"] .dropdown-item .key,
[data-theme="dracula"] .dropdown-item .key,
[data-theme="monokai"] .dropdown-item .key,
[data-theme="nord"] .dropdown-item .key {
    color: var(--text-muted);
}

[data-theme="kawaii-dark"] .dropdown-sep,
[data-theme="dracula"] .dropdown-sep,
[data-theme="monokai"] .dropdown-sep,
[data-theme="nord"] .dropdown-sep {
    background: var(--border);
}

/* Settings popup */
[data-theme="kawaii-dark"] .settings-popup,
[data-theme="dracula"] .settings-popup,
[data-theme="monokai"] .settings-popup,
[data-theme="nord"] .settings-popup {
    background: var(--bg-panel);
}

[data-theme="kawaii-dark"] .settings-header,
[data-theme="dracula"] .settings-header,
[data-theme="monokai"] .settings-header,
[data-theme="nord"] .settings-header {
    border-bottom-color: var(--border);
}

[data-theme="kawaii-dark"] .settings-header h2,
[data-theme="dracula"] .settings-header h2,
[data-theme="monokai"] .settings-header h2,
[data-theme="nord"] .settings-header h2 {
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .settings-close,
[data-theme="dracula"] .settings-close,
[data-theme="monokai"] .settings-close,
[data-theme="nord"] .settings-close {
    color: var(--text-muted);
}

[data-theme="kawaii-dark"] .settings-close:hover,
[data-theme="dracula"] .settings-close:hover,
[data-theme="monokai"] .settings-close:hover,
[data-theme="nord"] .settings-close:hover {
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .settings-section h3,
[data-theme="dracula"] .settings-section h3,
[data-theme="monokai"] .settings-section h3,
[data-theme="nord"] .settings-section h3 {
    color: var(--bg-ocean-deep);
}

[data-theme="kawaii-dark"] .settings-footer,
[data-theme="dracula"] .settings-footer,
[data-theme="monokai"] .settings-footer,
[data-theme="nord"] .settings-footer {
    border-top-color: var(--border);
}

/* Form controls */
[data-theme="kawaii-dark"] select,
[data-theme="kawaii-dark"] input[type="text"],
[data-theme="kawaii-dark"] input[type="number"],
[data-theme="dracula"] select,
[data-theme="dracula"] input[type="text"],
[data-theme="dracula"] input[type="number"],
[data-theme="monokai"] select,
[data-theme="monokai"] input[type="text"],
[data-theme="monokai"] input[type="number"],
[data-theme="nord"] select,
[data-theme="nord"] input[type="text"],
[data-theme="nord"] input[type="number"] {
    background: var(--bg-input);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] select:focus,
[data-theme="kawaii-dark"] input:focus,
[data-theme="dracula"] select:focus,
[data-theme="dracula"] input:focus,
[data-theme="monokai"] select:focus,
[data-theme="monokai"] input:focus,
[data-theme="nord"] select:focus,
[data-theme="nord"] input:focus {
    border-color: var(--bg-ocean-deep);
}

[data-theme="kawaii-dark"] input[type="range"],
[data-theme="dracula"] input[type="range"],
[data-theme="monokai"] input[type="range"],
[data-theme="nord"] input[type="range"] {
    background: var(--bg-ocean-medium);
}

[data-theme="kawaii-dark"] input[type="range"]::-webkit-slider-thumb,
[data-theme="dracula"] input[type="range"]::-webkit-slider-thumb,
[data-theme="monokai"] input[type="range"]::-webkit-slider-thumb,
[data-theme="nord"] input[type="range"]::-webkit-slider-thumb {
    background: var(--bg-ocean-deep);
    border-color: var(--border);
}

[data-theme="kawaii-dark"] .slider,
[data-theme="dracula"] .slider,
[data-theme="monokai"] .slider,
[data-theme="nord"] .slider {
    background: var(--bg-ocean-medium);
}

[data-theme="kawaii-dark"] .switch input:checked+.slider,
[data-theme="dracula"] .switch input:checked+.slider,
[data-theme="monokai"] .switch input:checked+.slider,
[data-theme="nord"] .switch input:checked+.slider {
    background: var(--bg-ocean-deep);
}

[data-theme="kawaii-dark"] .setting-value,
[data-theme="dracula"] .setting-value,
[data-theme="monokai"] .setting-value,
[data-theme="nord"] .setting-value {
    color: var(--text-secondary);
}

[data-theme="kawaii-dark"] .tooltip,
[data-theme="dracula"] .tooltip,
[data-theme="monokai"] .tooltip,
[data-theme="nord"] .tooltip {
    background: var(--bg-ocean-medium);
    color: var(--text-secondary);
}

[data-theme="kawaii-dark"] .btn-upload,
[data-theme="dracula"] .btn-upload,
[data-theme="monokai"] .btn-upload,
[data-theme="nord"] .btn-upload {
    background: var(--bg-button);
    border-color: var(--border);
    color: var(--text-secondary);
}

[data-theme="kawaii-dark"] .btn-upload:hover,
[data-theme="dracula"] .btn-upload:hover,
[data-theme="monokai"] .btn-upload:hover,
[data-theme="nord"] .btn-upload:hover {
    background: var(--bg-button-hover);
}

[data-theme="kawaii-dark"] .btn-reset-bg,
[data-theme="dracula"] .btn-reset-bg,
[data-theme="monokai"] .btn-reset-bg,
[data-theme="nord"] .btn-reset-bg {
    border-color: var(--border);
    color: var(--text-muted);
}

[data-theme="kawaii-dark"] .btn-save,
[data-theme="dracula"] .btn-save,
[data-theme="monokai"] .btn-save,
[data-theme="nord"] .btn-save {
    background: var(--accent);
    color: var(--button-text-on-accent, #ffffff);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

[data-theme="kawaii-dark"] .btn-reset,
[data-theme="dracula"] .btn-reset,
[data-theme="monokai"] .btn-reset,
[data-theme="nord"] .btn-reset {
    color: var(--text-muted);
}

/* Scrollbar */
[data-theme="kawaii-dark"] ::-webkit-scrollbar-thumb,
[data-theme="dracula"] ::-webkit-scrollbar-thumb,
[data-theme="monokai"] ::-webkit-scrollbar-thumb,
[data-theme="nord"] ::-webkit-scrollbar-thumb {
    background: var(--bg-ocean-medium);
    border-color: var(--bg-ocean-dark);
}

/* Welcome screen */
[data-theme="kawaii-dark"] .welcome-box {
    background: rgba(26, 37, 48, 0.98);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border-color: var(--border-strong, var(--border));
    box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.6),
        0 0 0 1px rgba(255, 255, 255, 0.05) inset;
}

[data-theme="dracula"] .welcome-box {
    background: rgba(40, 42, 54, 0.98);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border-color: var(--border-strong, var(--border));
    box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.6),
        0 0 0 1px rgba(255, 255, 255, 0.05) inset;
}

[data-theme="monokai"] .welcome-box {
    background: rgba(39, 40, 34, 0.98);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border-color: var(--border-strong, var(--border));
    box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.6),
        0 0 0 1px rgba(255, 255, 255, 0.05) inset;
}

[data-theme="nord"] .welcome-box {
    background: rgba(46, 52, 64, 0.98);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border-color: var(--border-strong, var(--border));
    box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.6),
        0 0 0 1px rgba(255, 255, 255, 0.05) inset;
}

[data-theme="kawaii-dark"] .welcome-box h1,
[data-theme="dracula"] .welcome-box h1,
[data-theme="monokai"] .welcome-box h1,
[data-theme="nord"] .welcome-box h1 {
    background: linear-gradient(135deg, var(--bg-ocean-deep), var(--accent));
    -webkit-background-clip: text;
    background-clip: text;
}

[data-theme="kawaii-dark"] .welcome-box p,
[data-theme="dracula"] .welcome-box p,
[data-theme="monokai"] .welcome-box p,
[data-theme="nord"] .welcome-box p {
    color: var(--text-secondary);
}

/* Welcome screen buttons now use CSS variables from base theme.css */
/* Removed theme-specific overrides - base styles work for all themes including custom ones */

/* Split View */
/* Clear and panel close buttons */
[data-theme="kawaii-dark"] .clear-btn,
[data-theme="dracula"] .clear-btn,
[data-theme="monokai"] .clear-btn,
[data-theme="nord"] .clear-btn {
    color: var(--text-muted);
}

[data-theme="kawaii-dark"] .clear-btn:hover,
[data-theme="dracula"] .clear-btn:hover,
[data-theme="monokai"] .clear-btn:hover,
[data-theme="nord"] .clear-btn:hover {
    background: var(--bg-button-hover);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .panel-close,
[data-theme="dracula"] .panel-close,
[data-theme="monokai"] .panel-close,
[data-theme="nord"] .panel-close {
    color: var(--text-muted);
}

[data-theme="kawaii-dark"] .panel-close:hover,
[data-theme="dracula"] .panel-close:hover,
[data-theme="monokai"] .panel-close:hover,
[data-theme="nord"] .panel-close:hover {
    background: var(--bg-button-hover);
    color: var(--text-primary);
}

/* Resizers */
[data-theme="kawaii-dark"] .resizer:hover,
[data-theme="kawaii-dark"] .resizer.dragging,
[data-theme="kawaii-dark"] .resizer-h:hover,
[data-theme="kawaii-dark"] .resizer-h.dragging,
[data-theme="kawaii-dark"] .resizer-split:hover,
[data-theme="kawaii-dark"] .resizer-split.dragging,
[data-theme="dracula"] .resizer:hover,
[data-theme="dracula"] .resizer.dragging,
[data-theme="dracula"] .resizer-h:hover,
[data-theme="dracula"] .resizer-h.dragging,
[data-theme="dracula"] .resizer-split:hover,
[data-theme="dracula"] .resizer-split.dragging,
[data-theme="monokai"] .resizer:hover,
[data-theme="monokai"] .resizer.dragging,
[data-theme="monokai"] .resizer-h:hover,
[data-theme="monokai"] .resizer-h.dragging,
[data-theme="monokai"] .resizer-split:hover,
[data-theme="monokai"] .resizer-split.dragging,
[data-theme="nord"] .resizer-split.dragging {
    background: var(--bg-ocean-deep);
}

/* Separators */
[data-theme="kawaii-dark"] .sep,
[data-theme="dracula"] .sep,
[data-theme="monokai"] .sep,
[data-theme="nord"] .sep {
    background: var(--border);
}

/* Send button */
[data-theme="kawaii-dark"] .send-btn,
[data-theme="dracula"] .send-btn,
[data-theme="monokai"] .send-btn,
[data-theme="nord"] .send-btn {
    background: var(--bg-ocean-deep);
    color: var(--bg-ocean-dark);
}

[data-theme="kawaii-dark"] .send-btn:hover:not(:disabled),
[data-theme="dracula"] .send-btn:hover:not(:disabled),
[data-theme="monokai"] .send-btn:hover:not(:disabled),
[data-theme="nord"] .send-btn:hover:not(:disabled) {
    background: var(--accent);
}

/* Prompt in terminal */
[data-theme="kawaii-dark"] .prompt,
[data-theme="dracula"] .prompt,
[data-theme="monokai"] .prompt,
[data-theme="nord"] .prompt {
    color: var(--bg-ocean-deep);
}

/* Tab close button - softer color */
[data-theme="kawaii-dark"] .tab-x,
[data-theme="dracula"] .tab-x,
[data-theme="monokai"] .tab-x,
[data-theme="nord"] .tab-x {
    color: var(--text-muted);
}

[data-theme="kawaii-dark"] .tab:hover .tab-x,
[data-theme="dracula"] .tab:hover .tab-x,
[data-theme="monokai"] .tab:hover .tab-x,
[data-theme="nord"] .tab:hover .tab-x {
    color: var(--text-secondary);
}

/* ============================================================================
   SETTINGS POPUP - DARK THEME OVERRIDES
   ============================================================================ */
/* Settings sidebar */
[data-theme="kawaii-dark"] .settings-sidebar,
[data-theme="dracula"] .settings-sidebar,
[data-theme="monokai"] .settings-sidebar,
[data-theme="nord"] .settings-sidebar {
    background: var(--bg-button);
    border-color: var(--border);
}

/* Settings container background */
[data-theme="kawaii-dark"] .settings-container,
[data-theme="dracula"] .settings-container,
[data-theme="monokai"] .settings-container,
[data-theme="nord"] .settings-container {
    background: var(--bg-panel);
}

/* Settings header background */
[data-theme="kawaii-dark"] .settings-header,
[data-theme="dracula"] .settings-header,
[data-theme="monokai"] .settings-header,
[data-theme="nord"] .settings-header {
    background: var(--bg-panel);
}

/* Settings tab buttons */
[data-theme="kawaii-dark"] .settings-tab,
[data-theme="dracula"] .settings-tab,
[data-theme="monokai"] .settings-tab,
[data-theme="nord"] .settings-tab {
    color: var(--text-secondary);
}

[data-theme="kawaii-dark"] .settings-tab:hover,
[data-theme="dracula"] .settings-tab:hover,
[data-theme="monokai"] .settings-tab:hover,
[data-theme="nord"] .settings-tab:hover {
    background: var(--bg-button-hover);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .settings-tab.active,
[data-theme="dracula"] .settings-tab.active,
[data-theme="monokai"] .settings-tab.active,
[data-theme="nord"] .settings-tab.active {
    background: var(--bg-ocean-deep) !important;
    color: var(--bg-ocean-dark) !important;
}

/* Settings content area */
[data-theme="kawaii-dark"] .settings-content,
[data-theme="dracula"] .settings-content,
[data-theme="monokai"] .settings-content,
[data-theme="nord"] .settings-content {
    background: var(--bg-button);
    border-color: var(--border);
}

/* Settings panel h3 titles */
[data-theme="kawaii-dark"] .settings-panel h3 {
    color: #88c9ea !important;
    border-bottom-color: var(--border);
}

[data-theme="dracula"] .settings-panel h3 {
    color: #bd93f9 !important;
    border-bottom-color: var(--border);
}

[data-theme="monokai"] .settings-panel h3 {
    color: #a6e22e !important;
    border-bottom-color: var(--border);
}

[data-theme="nord"] .settings-panel h3 {
    color: #88c0d0 !important;
    border-bottom-color: var(--border);
}

/* Setting row background */
[data-theme="kawaii-dark"] .setting-row,
[data-theme="dracula"] .setting-row,
[data-theme="monokai"] .setting-row,
[data-theme="nord"] .setting-row {
    background: var(--bg-input);
    border-color: var(--border);
}

[data-theme="kawaii-dark"] .setting-row:hover,
[data-theme="dracula"] .setting-row:hover,
[data-theme="monokai"] .setting-row:hover,
[data-theme="nord"] .setting-row:hover {
    background: var(--bg-button);
    border-color: var(--border-strong);
}

/* Setting row labels - ensure text is readable */
html[data-theme="kawaii-dark"] .setting-row label:first-child,
html[data-theme="kawaii-dark"] .setting-row>label:not(.switch) {
    color: #e0f0ff !important;
}

html[data-theme="dracula"] .setting-row label:first-child,
html[data-theme="dracula"] .setting-row>label:not(.switch) {
    color: #f8f8f2 !important;
}

html[data-theme="monokai"] .setting-row label:first-child,
html[data-theme="monokai"] .setting-row>label:not(.switch) {
    color: #f8f8f2 !important;
}

html[data-theme="nord"] .setting-row label:first-child,
html[data-theme="nord"] .setting-row>label:not(.switch) {
    color: #eceff4 !important;
}

/* Appearance controls h3 */
[data-theme="kawaii-dark"] .appearance-controls h3,
[data-theme="dracula"] .appearance-controls h3,
[data-theme="monokai"] .appearance-controls h3,
[data-theme="nord"] .appearance-controls h3 {
    color: var(--text-secondary);
}

/* Preview bg controls */
[data-theme="kawaii-dark"] .preview-bg-controls,
[data-theme="dracula"] .preview-bg-controls,
[data-theme="monokai"] .preview-bg-controls,
[data-theme="nord"] .preview-bg-controls {
    background: var(--bg-input);
    border-color: var(--border);
}

[data-theme="kawaii-dark"] .bg-control-row label,
[data-theme="dracula"] .bg-control-row label,
[data-theme="monokai"] .bg-control-row label,
[data-theme="nord"] .bg-control-row label {
    color: var(--text-secondary);
}

/* Preview window for dark themes - remove glow, use theme colors */
[data-theme="kawaii-dark"] .preview-window,
[data-theme="dracula"] .preview-window,
[data-theme="monokai"] .preview-window,
[data-theme="nord"] .preview-window {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    border-color: var(--border);
    background: var(--bg-panel);
    /* Ensure preview is clear and not affected by backdrop-filter */
    isolation: isolate;
    position: relative;
    z-index: 101;
    transform: translateZ(0);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Universal rule: Remove backdrop-filter from settings overlay for all themes to keep preview clear */
[data-theme] .settings-overlay {
    backdrop-filter: none !important;
}

[data-theme="kawaii-dark"] .preview-header,
[data-theme="dracula"] .preview-header,
[data-theme="monokai"] .preview-header,
[data-theme="nord"] .preview-header {
    background: var(--bg-header);
}

[data-theme="kawaii-dark"] .preview-body,
[data-theme="dracula"] .preview-body,
[data-theme="monokai"] .preview-body,
[data-theme="nord"] .preview-body {
    background: var(--bg-input);
}

/* Settings footer */
[data-theme="kawaii-dark"] .settings-footer,
[data-theme="dracula"] .settings-footer,
[data-theme="monokai"] .settings-footer,
[data-theme="nord"] .settings-footer {
    background: var(--bg-panel);
}

/* Settings close button */
[data-theme="kawaii-dark"] .settings-close,
[data-theme="dracula"] .settings-close,
[data-theme="monokai"] .settings-close,
[data-theme="nord"] .settings-close {
    background: var(--bg-button);
    border-color: var(--border);
    color: var(--text-muted);
}

[data-theme="kawaii-dark"] .settings-close:hover,
[data-theme="dracula"] .settings-close:hover,
[data-theme="monokai"] .settings-close:hover,
[data-theme="nord"] .settings-close:hover {
    background: var(--error);
    border-color: var(--error);
    color: white;
}

/* ============================================================================
   CC POPUP DARK THEME STYLES
   ============================================================================ */
[data-theme="kawaii-dark"] .cc-overlay,
[data-theme="dracula"] .cc-overlay,
[data-theme="monokai"] .cc-overlay,
[data-theme="nord"] .cc-overlay {
    background: rgba(0, 0, 0, 0.6);
}

[data-theme="kawaii-dark"] .cc-popup,
[data-theme="dracula"] .cc-popup,
[data-theme="monokai"] .cc-popup,
[data-theme="nord"] .cc-popup {
    background: var(--bg-panel);
    border-color: var(--border-strong);
}

[data-theme="kawaii-dark"] .cc-header,
[data-theme="dracula"] .cc-header,
[data-theme="monokai"] .cc-header,
[data-theme="nord"] .cc-header {
    background: var(--bg-panel);
    border-bottom-color: var(--border);
}

[data-theme="kawaii-dark"] .cc-header h2,
[data-theme="dracula"] .cc-header h2,
[data-theme="monokai"] .cc-header h2,
[data-theme="nord"] .cc-header h2 {
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .cc-header h2 svg,
[data-theme="dracula"] .cc-header h2 svg,
[data-theme="monokai"] .cc-header h2 svg,
[data-theme="nord"] .cc-header h2 svg {
    color: var(--bg-ocean-deep);
}

[data-theme="kawaii-dark"] .cc-close,
[data-theme="dracula"] .cc-close,
[data-theme="monokai"] .cc-close,
[data-theme="nord"] .cc-close {
    background: var(--bg-button);
    border-color: var(--border);
    color: var(--text-muted);
}

[data-theme="kawaii-dark"] .cc-close:hover,
[data-theme="dracula"] .cc-close:hover,
[data-theme="monokai"] .cc-close:hover,
[data-theme="nord"] .cc-close:hover {
    background: var(--error);
    border-color: var(--error);
    color: white;
}

[data-theme="kawaii-dark"] .cc-body,
[data-theme="dracula"] .cc-body,
[data-theme="monokai"] .cc-body,
[data-theme="nord"] .cc-body {
    background: var(--bg-input);
}

[data-theme="kawaii-dark"] .cc-step-num,
[data-theme="dracula"] .cc-step-num,
[data-theme="monokai"] .cc-step-num,
[data-theme="nord"] .cc-step-num {
    background: var(--bg-ocean-deep);
    color: var(--bg-ocean-dark);
    box-shadow: none;
}

[data-theme="kawaii-dark"] .cc-step-text,
[data-theme="dracula"] .cc-step-text,
[data-theme="monokai"] .cc-step-text,
[data-theme="nord"] .cc-step-text {
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .cc-step-text strong,
[data-theme="dracula"] .cc-step-text strong,
[data-theme="monokai"] .cc-step-text strong,
[data-theme="nord"] .cc-step-text strong {
    color: var(--bg-ocean-deep);
}

[data-theme="kawaii-dark"] .cc-footer,
[data-theme="dracula"] .cc-footer,
[data-theme="monokai"] .cc-footer,
[data-theme="nord"] .cc-footer {
    background: var(--bg-panel);
    border-top-color: var(--border);
}

[data-theme="kawaii-dark"] .cc-btn.secondary,
[data-theme="dracula"] .cc-btn.secondary,
[data-theme="monokai"] .cc-btn.secondary,
[data-theme="nord"] .cc-btn.secondary {
    background: var(--bg-button);
    border-color: var(--border);
    color: var(--text-secondary);
}

[data-theme="kawaii-dark"] .cc-btn.secondary:hover,
[data-theme="dracula"] .cc-btn.secondary:hover,
[data-theme="monokai"] .cc-btn.secondary:hover,
[data-theme="nord"] .cc-btn.secondary:hover {
    background: var(--bg-button-hover);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .cc-btn.primary,
[data-theme="dracula"] .cc-btn.primary,
[data-theme="monokai"] .cc-btn.primary,
[data-theme="nord"] .cc-btn.primary {
    background: var(--bg-ocean-deep);
    border-color: var(--bg-ocean-deep);
    color: var(--bg-ocean-dark);
    box-shadow: none;
}

[data-theme="kawaii-dark"] .cc-btn.primary:hover,
[data-theme="dracula"] .cc-btn.primary:hover,
[data-theme="monokai"] .cc-btn.primary:hover,
[data-theme="nord"] .cc-btn.primary:hover {
    filter: brightness(1.1);
}

/* CC Step dark theme overrides */
[data-theme="kawaii-dark"] .cc-step,
[data-theme="dracula"] .cc-step,
[data-theme="monokai"] .cc-step,
[data-theme="nord"] .cc-step {
    background: var(--bg-button);
    border-color: var(--border);
}

[data-theme="kawaii-dark"] .cc-step:hover,
[data-theme="dracula"] .cc-step:hover,
[data-theme="monokai"] .cc-step:hover,
[data-theme="nord"] .cc-step:hover {
    background: var(--bg-button-hover);
    border-color: var(--border-strong);
}

/* ============================================================================
   TEST NAVIGATION DARK THEME STYLES
   ============================================================================ */
[data-theme="kawaii-dark"] .test-nav,
[data-theme="dracula"] .test-nav,
[data-theme="monokai"] .test-nav,
[data-theme="nord"] .test-nav {
    background: var(--bg-button);
    border-color: var(--border);
    box-shadow: none;
}

[data-theme="kawaii-dark"] .test-nav-btn,
[data-theme="dracula"] .test-nav-btn,
[data-theme="monokai"] .test-nav-btn,
[data-theme="nord"] .test-nav-btn,
[data-theme="kawaii-dark"] .test-nav-btn:hover,
[data-theme="dracula"] .test-nav-btn:hover,
[data-theme="monokai"] .test-nav-btn:hover,
[data-theme="nord"] .test-nav-btn:hover {
    background: var(--bg-ocean-deep);
    border-color: var(--bg-ocean-deep);
    color: var(--bg-ocean-dark);
}

[data-theme="kawaii-dark"] .test-nav-label,
[data-theme="dracula"] .test-nav-label,
[data-theme="monokai"] .test-nav-label,
[data-theme="nord"] .test-nav-label {
    color: var(--text-primary);
}

/* ============================================================================
   DIFF COMPARISON DARK THEME STYLES
   ============================================================================ */
[data-theme="kawaii-dark"] .diff-verdict.verdict-pass,
[data-theme="dracula"] .diff-verdict.verdict-pass,
[data-theme="monokai"] .diff-verdict.verdict-pass,
[data-theme="nord"] .diff-verdict.verdict-pass {
    background: linear-gradient(135deg, rgba(104, 211, 145, 0.2) 0%, rgba(80, 250, 123, 0.2) 100%);
    color: var(--success);
    border-color: var(--success);
}

[data-theme="kawaii-dark"] .diff-verdict.verdict-fail,
[data-theme="dracula"] .diff-verdict.verdict-fail,
[data-theme="monokai"] .diff-verdict.verdict-fail,
[data-theme="nord"] .diff-verdict.verdict-fail {
    background: linear-gradient(135deg, rgba(255, 85, 85, 0.2) 0%, rgba(255, 121, 198, 0.2) 100%);
    color: var(--error);
    border-color: var(--error);
}

[data-theme="kawaii-dark"] .diff-line.correct,
[data-theme="dracula"] .diff-line.correct,
[data-theme="monokai"] .diff-line.correct,
[data-theme="nord"] .diff-line.correct {
    background: rgba(80, 250, 123, 0.1);
    border-left-color: var(--success);
}

[data-theme="kawaii-dark"] .diff-line.correct .diff-line-content,
[data-theme="dracula"] .diff-line.correct .diff-line-content,
[data-theme="monokai"] .diff-line.correct .diff-line-content,
[data-theme="nord"] .diff-line.correct .diff-line-content {
    color: var(--success);
}

[data-theme="kawaii-dark"] .diff-line.incorrect,
[data-theme="dracula"] .diff-line.incorrect,
[data-theme="monokai"] .diff-line.incorrect,
[data-theme="nord"] .diff-line.incorrect {
    background: rgba(255, 85, 85, 0.1);
    border-left-color: var(--error);
}

[data-theme="kawaii-dark"] .diff-line.incorrect .diff-line-content,
[data-theme="dracula"] .diff-line.incorrect .diff-line-content,
[data-theme="monokai"] .diff-line.incorrect .diff-line-content,
[data-theme="nord"] .diff-line.incorrect .diff-line-content {
    color: var(--error);
}

[data-theme="kawaii-dark"] .diff-actual,
[data-theme="dracula"] .diff-actual,
[data-theme="monokai"] .diff-actual,
[data-theme="nord"] .diff-actual {
    color: var(--error);
    background: rgba(255, 85, 85, 0.15);
}

/* Character-level diff for dark themes */
[data-theme="kawaii-dark"] .char-correct,
[data-theme="dracula"] .char-correct,
[data-theme="monokai"] .char-correct,
[data-theme="nord"] .char-correct {
    background: rgba(80, 250, 123, 0.3);
    color: var(--success);
}

[data-theme="kawaii-dark"] .char-incorrect,
[data-theme="dracula"] .char-incorrect,
[data-theme="monokai"] .char-incorrect,
[data-theme="nord"] .char-incorrect {
    background: rgba(255, 85, 85, 0.35);
    color: var(--error);
}

/* Line-level diff for dark themes */
[data-theme="kawaii-dark"] .line-correct,
[data-theme="dracula"] .line-correct,
[data-theme="monokai"] .line-correct,
[data-theme="nord"] .line-correct {
    background: rgba(80, 250, 123, 0.25);
    color: var(--success);
}

[data-theme="kawaii-dark"] .line-incorrect,
[data-theme="dracula"] .line-incorrect,
[data-theme="monokai"] .line-incorrect,
[data-theme="nord"] .line-incorrect {
    background: rgba(255, 85, 85, 0.3);
    color: var(--error);
}

/* ===== DOCK TABS - Dark Theme ===== */
[data-theme="kawaii-dark"] .dock-tabs,
[data-theme="dracula"] .dock-tabs,
[data-theme="monokai"] .dock-tabs,
[data-theme="nord"] .dock-tabs {
    background: rgba(0, 0, 0, 0.3);
    border-bottom-color: rgba(255, 255, 255, 0.1);
}

[data-theme="kawaii-dark"] .dock-tab,
[data-theme="dracula"] .dock-tab,
[data-theme="monokai"] .dock-tab,
[data-theme="nord"] .dock-tab {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.1);
    color: var(--text-muted);
}

[data-theme="kawaii-dark"] .dock-tab:hover,
[data-theme="dracula"] .dock-tab:hover,
[data-theme="monokai"] .dock-tab:hover,
[data-theme="nord"] .dock-tab:hover {
    background: rgba(255, 255, 255, 0.15);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .dock-tab.active,
[data-theme="dracula"] .dock-tab.active,
[data-theme="monokai"] .dock-tab.active,
[data-theme="nord"] .dock-tab.active {
    background: var(--bg-primary);
    border-bottom-color: var(--bg-primary);
    color: var(--text-primary);
}

[data-theme="kawaii-dark"] .dock-drop-indicator,
[data-theme="dracula"] .dock-drop-indicator,
[data-theme="monokai"] .dock-drop-indicator,
[data-theme="nord"] .dock-drop-indicator {
    outline-color: var(--accent) !important;
    background: rgba(136, 201, 234, 0.1) !important;
}

/* Docked terminal view - dark themes */
[data-theme="kawaii-dark"] .docked-terminal-view,
[data-theme="dracula"] .docked-terminal-view,
[data-theme="monokai"] .docked-terminal-view,
[data-theme="nord"] .docked-terminal-view {
    background: var(--bg-secondary, #1e1e1e);
}

[data-theme="kawaii-dark"] .docked-terminal-body,
[data-theme="dracula"] .docked-terminal-body,
[data-theme="monokai"] .docked-terminal-body,
[data-theme="nord"] .docked-terminal-body {
    color: var(--text-primary);
}

/* Docked tabs in dark themes - base style */
[data-theme="kawaii-dark"] .problems-panel:has(.docked-tab) .panel-title,
[data-theme="dracula"] .problems-panel:has(.docked-tab) .panel-title,
[data-theme="monokai"] .problems-panel:has(.docked-tab) .panel-title,
[data-theme="nord"] .problems-panel:has(.docked-tab) .panel-title {
    background: var(--bg-button);
    color: var(--text-secondary);
    border-color: transparent;
}

/* Docked tabs hover in dark themes */
[data-theme="kawaii-dark"] .problems-panel:has(.docked-tab) .panel-title:hover,
[data-theme="dracula"] .problems-panel:has(.docked-tab) .panel-title:hover,
[data-theme="monokai"] .problems-panel:has(.docked-tab) .panel-title:hover,
[data-theme="nord"] .problems-panel:has(.docked-tab) .panel-title:hover {
    background: var(--bg-button-hover);
    color: var(--text-primary);
}

/* Docked tabs active in dark themes */
[data-theme="kawaii-dark"] .problems-panel:has(.docked-tab) .panel-title.active,
[data-theme="dracula"] .problems-panel:has(.docked-tab) .panel-title.active,
[data-theme="monokai"] .problems-panel:has(.docked-tab) .panel-title.active,
[data-theme="nord"] .problems-panel:has(.docked-tab) .panel-title.active {
    background: var(--bg-ocean-medium);
    color: var(--text-primary);
    border-color: var(--bg-ocean-deep);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Problem count badge in dark themes */
[data-theme="kawaii-dark"] .problems-panel:has(.docked-tab) .problem-count,
[data-theme="dracula"] .problems-panel:has(.docked-tab) .problem-count,
[data-theme="monokai"] .problems-panel:has(.docked-tab) .problem-count,
[data-theme="nord"] .problems-panel:has(.docked-tab) .problem-count {
    background: var(--bg-ocean-deep);
    color: var(--bg-ocean-dark);
}

/* Undock button hover in dark themes */
[data-theme="kawaii-dark"] .dock-undock,
[data-theme="dracula"] .dock-undock,
[data-theme="monokai"] .dock-undock,
[data-theme="nord"] .dock-undock {
    background: rgba(255, 255, 255, 0.1);
}

[data-theme="kawaii-dark"] .dock-undock:hover,
[data-theme="dracula"] .dock-undock:hover,
[data-theme="monokai"] .dock-undock:hover,
[data-theme="nord"] .dock-undock:hover {
    background: var(--error);
}

/* Docked I/O view for dark themes */
[data-theme="kawaii-dark"] .docked-io-view,
[data-theme="dracula"] .docked-io-view,
[data-theme="monokai"] .docked-io-view,
[data-theme="nord"] .docked-io-view {
    background: var(--bg-secondary, #1e1e1e);
}

[data-theme="kawaii-dark"] .docked-io-header,
[data-theme="dracula"] .docked-io-header,
[data-theme="monokai"] .docked-io-header,
[data-theme="nord"] .docked-io-header {
    color: var(--text-muted);
    background: var(--bg-glass-heavy);
    border-bottom-color: var(--border);
}

[data-theme="kawaii-dark"] .docked-io-textarea,
[data-theme="dracula"] .docked-io-textarea,
[data-theme="monokai"] .docked-io-textarea,
[data-theme="nord"] .docked-io-textarea {
    color: var(--text-primary);
    background: var(--editor-bg);
}

[data-theme="kawaii-dark"] .docked-io-textarea::placeholder,
[data-theme="dracula"] .docked-io-textarea::placeholder,
[data-theme="monokai"] .docked-io-textarea::placeholder,
[data-theme="nord"] .docked-io-textarea::placeholder {
    color: var(--text-muted);
}

[data-theme="kawaii-dark"] .docked-io-divider,
[data-theme="dracula"] .docked-io-divider,
[data-theme="monokai"] .docked-io-divider,
[data-theme="nord"] .docked-io-divider {
    background: var(--border);
}

/* Fix Nord sidebar text color contrast */
[data-theme="nord"] .settings-tab {
    color: #eceff4 !important;
}

/* ============================================================================
   SAKURA THEME COMPONENT OVERRIDES
   Pink pastel with dark rose editor - requires special handling
   ============================================================================ */

/* Sakura Header - already covered by [data-theme] rule above */

[data-theme="sakura"] .logo {
    background: var(--bg-ocean-deep);
    border: 2px solid var(--border);
    color: white;
}

[data-theme="sakura"] .menu-group {
    background: var(--bg-button);
    border: 1px solid var(--border);
}

[data-theme="sakura"] .menu-btn {
    color: var(--text-secondary);
}

[data-theme="sakura"] .menu-btn:hover {
    background: var(--bg-button-hover);
    color: var(--text-primary);
}

[data-theme="sakura"] .menu-btn.active {
    background: var(--bg-ocean-deep);
    color: white;
}

/* Sakura Tabs */
[data-theme="sakura"] .tab {
    background: var(--bg-button);
    border: 2px solid var(--border);
    color: var(--text-secondary);
}

[data-theme="sakura"] .tab:hover {
    border-color: var(--accent);
    color: var(--text-primary);
}

[data-theme="sakura"] .tab.active {
    background: var(--bg-ocean-medium);
    border-color: var(--accent);
    color: var(--text-primary);
}

[data-theme="sakura"] .tab-add {
    background: var(--bg-button);
    border-color: var(--border);
    color: var(--accent);
}

/* Sakura Toggle & Action buttons */
[data-theme="sakura"] .toggle-btn {
    background: var(--bg-button);
    color: var(--accent);
    border: 1px solid var(--border);
}

[data-theme="sakura"] .toggle-btn:hover {
    background: var(--bg-button-hover);
}

[data-theme="sakura"] .toggle-btn.active {
    background: var(--accent);
    color: white;
}

[data-theme="sakura"] .action-btn {
    background: var(--bg-button);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="sakura"] .action-btn.primary {
    background: var(--accent);
    border-color: var(--accent);
    color: white;
}

/* Sakura Editor & Panels */
[data-theme="sakura"] .editor-section {
    background: var(--editor-bg);
    border: 2px solid var(--border) !important;
}

[data-theme="sakura"] .editor-pane {
    background: var(--editor-bg);
}

[data-theme="sakura"] .editor-area {
    background-color: var(--editor-bg);
    background-image: var(--editor-bg-image, none);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    border: none !important;
}

[data-theme="sakura"] .terminal-section {
    background: var(--bg-panel);
    border: 2px solid var(--border);
}

[data-theme="sakura"] .terminal-body {
    background: var(--terminal-bg);
    color: var(--terminal-text);
}

[data-theme="sakura"] .terminal-input {
    background: var(--terminal-bg);
    border-top-color: var(--border);
}

[data-theme="sakura"] .terminal-input input,
[data-theme="sakura"] .terminal-input textarea {
    color: var(--terminal-text);
}

/* Sakura IO Panels */
[data-theme="sakura"] .io-panel {
    background: var(--bg-panel);
    border: 2px solid var(--border);
}

[data-theme="sakura"] .io-section {
    border-color: var(--border);
}

[data-theme="sakura"] .panel-head {
    background: var(--bg-glass-heavy);
    border-bottom: 2px solid var(--border);
}

[data-theme="sakura"] .panel-title {
    color: var(--text-secondary);
}

[data-theme="sakura"] .panel-textarea {
    background: var(--editor-bg);
    color: var(--terminal-text);
}

/* Sakura Problems Panel */
[data-theme="sakura"] .problems-panel {
    background: var(--bg-panel);
    border-top: 2px solid var(--border);
}

/* Sakura Status Bar */
[data-theme="sakura"] .status-bar {
    background: var(--bg-header);
    border-top-color: var(--border);
    color: var(--text-secondary);
}

/* Sakura Dropdowns */
[data-theme="sakura"] .dropdown {
    background: var(--bg-panel);
    border-color: var(--border);
}

[data-theme="sakura"] .dropdown-item {
    color: var(--text-primary);
}

[data-theme="sakura"] .dropdown-item:hover {
    background: var(--bg-button-hover);
}

/* Sakura Settings Popup */
[data-theme="sakura"] .settings-popup {
    background: var(--bg-panel);
    border-color: var(--border);
}

[data-theme="sakura"] .settings-header {
    background: var(--bg-ocean-medium);
    border-bottom-color: var(--border);
}

[data-theme="sakura"] .settings-header h2 {
    color: var(--text-primary);
}

[data-theme="sakura"] .settings-sidebar {
    background: var(--bg-button);
    border-color: var(--border);
}

[data-theme="sakura"] .settings-content {
    background: var(--bg-panel);
}

[data-theme="sakura"] .settings-tab {
    color: var(--text-secondary);
}

/* Sakura Preview Window - Make it more solid to avoid blur effect */
[data-theme="sakura"] .preview-window {
    background: linear-gradient(135deg, #fff5f8 0%, #fff0f5 100%) !important;
    /* Use solid colors instead of transparent rgba */
    position: relative;
    z-index: 10;
    /* Ensure it's not affected by backdrop-filter */
    isolation: isolate;
}

/* Remove backdrop blur completely for sakura theme to make preview crystal clear */
[data-theme="sakura"] .settings-overlay {
    backdrop-filter: none !important;
    /* Lighter overlay for sakura */
    background: rgba(255, 182, 193, 0.3) !important;
}

[data-theme="sakura"] .settings-tab.active {
    background: var(--accent);
    color: white;
}

[data-theme="sakura"] .settings-section h3 {
    color: var(--accent);
    border-bottom-color: var(--border);
}

[data-theme="sakura"] .settings-footer {
    background: var(--bg-ocean-medium);
    border-top-color: var(--border);
}

[data-theme="sakura"] .setting-row {
    background: var(--bg-button);
    border-color: var(--border);
}

[data-theme="sakura"] .setting-row label {
    color: var(--text-secondary);
}

/* Sakura Form Controls */
[data-theme="sakura"] select,
[data-theme="sakura"] input[type="text"],
[data-theme="sakura"] input[type="number"] {
    background: var(--bg-input);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="sakura"] select:focus,
[data-theme="sakura"] input:focus {
    border-color: var(--accent);
}

/* Sakura Docked Views */
[data-theme="sakura"] .docked-io-view {
    background: var(--terminal-bg);
}

[data-theme="sakura"] .docked-io-header-bar {
    background: rgba(45, 31, 47, 0.9);
    border-bottom-color: rgba(255, 105, 180, 0.3);
}

[data-theme="sakura"] .docked-io-title {
    color: var(--terminal-text);
}

[data-theme="sakura"] .docked-test-nav .docked-nav-btn {
    background: rgba(255, 105, 180, 0.2);
    color: var(--accent);
}

[data-theme="sakura"] .docked-test-nav .docked-nav-btn:hover {
    background: var(--accent);
    color: white;
}

[data-theme="sakura"] .docked-test-label {
    background: rgba(255, 105, 180, 0.2);
    color: var(--terminal-text);
}

[data-theme="sakura"] .docked-io-header {
    color: var(--accent);
    background: rgba(45, 31, 47, 0.8);
    border-bottom-color: rgba(255, 105, 180, 0.2);
}

[data-theme="sakura"] .docked-io-textarea {
    color: var(--terminal-text);
    background: var(--editor-bg);
}

[data-theme="sakura"] .docked-io-textarea::placeholder {
    color: rgba(248, 232, 240, 0.4);
}

[data-theme="sakura"] .docked-io-divider {
    background: rgba(255, 105, 180, 0.3);
}

[data-theme="sakura"] .docked-terminal-view {
    background: var(--terminal-bg);
}

[data-theme="sakura"] .docked-terminal-body {
    color: var(--terminal-text);
}

/* Sakura Scrollbars */
[data-theme="sakura"] ::-webkit-scrollbar-thumb {
    background: rgba(255, 105, 180, 0.4);
}

[data-theme="sakura"] ::-webkit-scrollbar-thumb:hover {
    background: var(--accent);
}

/* ============================================================================
   THEME CAROUSEL (Horizontal Theme Selector)
   ============================================================================ */

.theme-section {
    margin-bottom: 24px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--border);
    position: relative;
    z-index: 1;
}

.theme-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    gap: 12px;
    padding-bottom: 12px;
    border-bottom: 2px dashed var(--border);
}

.theme-section-header h3 {
    margin: 0;
    font-size: 14px;
    font-weight: 700;
    font-family: 'Fredoka', sans-serif;
    color: var(--settings-section-color, var(--accent));
    display: flex;
    align-items: center;
    gap: 8px;
}

.theme-actions-inline {
    display: flex;
    gap: 8px;
    flex-shrink: 0;
}

.btn-theme-action {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    font-size: 12px;
    font-weight: 600;
    font-family: 'Nunito', sans-serif;
    border-radius: 20px 18px 22px 16px;
    border: 2px solid var(--border);
    background: var(--bg-input);
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
    box-shadow: 2px 2px 0 var(--shadow-card);
}

.btn-theme-action svg {
    flex-shrink: 0;
}

.btn-theme-action:hover {
    border-color: var(--accent);
    background: var(--bg-button-hover);
    color: var(--accent);
    transform: translate(-1px, -1px);
    box-shadow: 3px 3px 0 var(--shadow-card);
}

.btn-theme-action.primary {
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-color: var(--accent);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.btn-theme-action.primary:hover {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
    transform: translate(-1px, -1px);
    box-shadow: 3px 3px 0 var(--shadow-card);
}

.theme-carousel-container {
    display: flex;
    align-items: center;
    gap: 8px;
    position: relative;
}

.theme-carousel-arrow {
    flex-shrink: 0;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 1px solid var(--border);
    background: var(--bg-panel);
    color: var(--text-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    z-index: 1;
}

.theme-carousel-arrow:hover {
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-color: var(--accent);
}

.theme-carousel-arrow:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.theme-carousel {
    flex: 1;
    display: flex;
    gap: 12px;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: 8px 0;
    scrollbar-width: none;
    -ms-overflow-style: none;
    cursor: default;
    user-select: none;
}

.theme-carousel::-webkit-scrollbar {
    display: none;
}

.theme-carousel-card {
    flex-shrink: 0;
    width: 140px;
    border-radius: 8px;
    border: 2px solid var(--border);
    background: var(--bg-panel);
    overflow: hidden;
    cursor: pointer;
    transition: all 0.2s;
    user-select: none;
}

.theme-carousel-card:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
    box-shadow: var(--shadow-card);
}

.theme-carousel-card.active {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent);
}

.theme-carousel-preview {
    height: 80px;
    padding: 8px;
    position: relative;
    overflow: hidden;
}

.theme-carousel-info {
    padding: 8px;
    text-align: center;
    background: var(--bg-input);
    border-top: 1px solid var(--border);
}

.theme-carousel-name {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.theme-carousel-type {
    font-size: 9px;
    color: var(--text-muted);
    text-transform: uppercase;
}

.appearance-section {
    margin-bottom: 24px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--border);
    position: relative;
    z-index: 1;
}

.appearance-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.appearance-section h3 {
    margin: 0 0 12px 0;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

/* ============================================================================
   FULLSCREEN POPUP (Marketplace & Customizer)
   ============================================================================ */

.fullscreen-popup {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.fullscreen-popup-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(8px);
}

.fullscreen-popup-container {
    position: relative;
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 12px;
    width: 95%;
    height: 90%;
    max-width: 1400px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.fullscreen-popup-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px 24px;
    border-bottom: 1px solid var(--border);
    background: var(--bg-header);
    border-radius: 12px 12px 0 0;
}

.fullscreen-popup-header h2 {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 0;
    font-size: 18px;
    color: var(--text-primary);
}

.fullscreen-popup-actions {
    display: flex;
    gap: 8px;
    margin-left: auto;
}

.fullscreen-popup-close {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.fullscreen-popup-close:hover {
    background: var(--error);
    color: #fff;
}

.fullscreen-popup-body {
    flex: 1;
    overflow-y: auto;
    padding: 24px;
}

.fullscreen-popup-footer {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    padding: 16px 24px;
    border-top: 1px solid var(--border);
    background: var(--bg-header);
    border-radius: 0 0 12px 12px;
}

/* ============================================================================
   THEME MARKETPLACE v3.0
   ============================================================================ */

/* Marketplace Popup */
.mp-section {
    margin-bottom: 32px;
}

.mp-section-title {
    font-size: 15px;
    font-weight: 700;
    font-family: 'Nunito', sans-serif;
    color: var(--text-primary);
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--border);
    display: flex;
    align-items: center;
    gap: 8px;
}

.mp-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 16px;
}

.mp-card {
    background: var(--bg-input);
    border: 2px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    transition: all 0.2s ease;
}

.mp-card:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.mp-card.active {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent);
}

.mp-card-preview {
    height: 100px;
    position: relative;
    overflow: hidden;
    border-bottom: 1px solid var(--border);
}

.mp-card-preview .mini-code {
    font-family: 'JetBrains Mono', 'Consolas', monospace;
}

.mp-active-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    background: var(--accent);
    color: #fff;
    font-size: 10px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 10px;
}

.mp-card-info {
    padding: 12px;
}

.mp-card-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.mp-card-desc {
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 8px;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.mp-card-meta {
    font-size: 10px;
    color: var(--text-muted);
    display: flex;
    gap: 8px;
    margin-bottom: 10px;
}

.mp-card-actions {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
}

.mp-btn {
    flex: 1;
    min-width: 50px;
    padding: 6px 10px;
    font-size: 11px;
    font-weight: 500;
    border: 1px solid var(--border);
    background: var(--bg-panel);
    color: var(--text-primary);
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

.mp-btn svg {
    flex-shrink: 0;
}

.mp-btn:hover {
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-color: var(--accent);
}

.mp-btn:disabled,
.mp-btn.disabled {
    opacity: 0.5;
    pointer-events: none;
    cursor: not-allowed;
}

.mp-btn.danger:hover {
    background: var(--error);
    border-color: var(--error);
}

/* Carousel badge */
.theme-carousel-badge {
    font-size: 8px;
    background: var(--accent);
    color: #fff;
    padding: 1px 4px;
    border-radius: 3px;
    margin-left: 4px;
}

.theme-carousel-meta {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

/* ============================================================================
   THEME CUSTOMIZER (Enhanced with Live Preview)
   ============================================================================ */

.customizer-container {
    max-width: 1600px;
}

.customizer-body {
    display: grid;
    grid-template-columns: 1fr 380px;
    gap: 24px;
    height: 100%;
    padding: 0 !important;
}

.customizer-preview-section {
    display: flex;
    flex-direction: column;
    padding: 24px;
    background: var(--bg-ocean-dark, #1a1a2e);
    border-right: 1px solid var(--border);
    overflow: hidden;
}

.customizer-live-preview {
    flex: 1;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
    border: 2px solid var(--border);
    background: var(--bg-panel);
}

/* Removed - using tc-preview-hint-top instead */

.customizer-controls-section {
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.customizer-tabs {
    display: flex;
    gap: 4px;
    padding: 16px 16px 0;
    border-bottom: 1px solid var(--border);
}

.customizer-tab {
    padding: 10px 16px;
    font-size: 13px;
    font-weight: 500;
    border: none;
    background: none;
    color: var(--text-secondary);
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: all 0.2s;
}

.customizer-tab:hover {
    color: var(--text-primary);
}

.customizer-tab.active {
    color: var(--accent);
    border-bottom-color: var(--accent);
}

.customizer-tab-content {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

.customizer-section {
    background: var(--bg-input);
    padding: 16px;
    border-radius: 8px;
    border: 1px solid var(--border);
    margin-bottom: 16px;
}

.customizer-section:last-child {
    margin-bottom: 0;
}

.customizer-section h4 {
    margin: 0 0 12px 0;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
}

.customizer-field {
    margin-bottom: 12px;
}

.customizer-field:last-child {
    margin-bottom: 0;
}

.customizer-field label {
    display: block;
    margin-bottom: 6px;
    font-size: 11px;
    color: var(--text-secondary);
    font-weight: 500;
}

.customizer-field input[type="text"],
.customizer-field textarea {
    width: 100%;
    padding: 8px 12px;
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-primary);
    font-size: 12px;
    font-family: inherit;
}

.customizer-field textarea {
    resize: vertical;
    min-height: 50px;
}

.color-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px;
    margin-bottom: 8px;
    background: var(--bg-panel);
    border-radius: 6px;
    border: 1px solid var(--border);
    cursor: pointer;
    transition: all 0.2s;
}

.color-row:hover {
    border-color: var(--accent);
}

.color-row:last-child {
    margin-bottom: 0;
}

.color-swatch {
    width: 28px;
    height: 28px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    flex-shrink: 0;
}

.color-label {
    flex: 1;
    font-size: 12px;
    color: var(--text-primary);
}

.color-value {
    font-size: 11px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
}

.customizer-save-options {
    display: flex;
    gap: 8px;
}

/* ============================================================================
   COLOR PICKER POPOVER
   ============================================================================ */

.color-picker-popover {
    position: fixed;
    z-index: 10001;
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    width: 200px;
}

.color-picker-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    border-bottom: 1px solid var(--border);
    font-size: 12px;
    font-weight: 600;
    color: var(--text-primary);
}

.color-picker-close {
    background: none;
    border: none;
    font-size: 18px;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0;
    line-height: 1;
}

.color-picker-close:hover {
    color: var(--error);
}

.color-picker-body {
    padding: 12px;
    display: flex;
    gap: 8px;
    align-items: center;
}

.color-picker-body input[type="color"] {
    width: 50px;
    height: 40px;
    border: 1px solid var(--border);
    border-radius: 4px;
    cursor: pointer;
    padding: 0;
}

.color-picker-body input[type="text"] {
    flex: 1;
    padding: 8px;
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-primary);
    font-size: 12px;
    font-family: 'JetBrains Mono', monospace;
}

.color-picker-footer {
    display: flex;
    justify-content: flex-end;
    gap: 6px;
    padding: 10px 12px;
    border-top: 1px solid var(--border);
}

.btn-sm {
    padding: 6px 12px;
    font-size: 11px;
}

/* ============================================================================
   CLICKABLE UI PREVIEW ELEMENTS
   ============================================================================ */

.preview-ui {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    font-size: 11px;
}

.preview-ui [data-color-key] {
    cursor: pointer;
    position: relative;
    transition: all 0.15s;
}

.preview-ui [data-color-key]:hover {
    outline: 2px dashed var(--accent);
    outline-offset: 2px;
}

.preview-ui [data-color-key]:hover::after {
    content: attr(data-color-label);
    position: absolute;
    top: -24px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--accent);
    color: #fff;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 10px;
    white-space: nowrap;
    z-index: 100;
}

/* Preview UI Components */
.preview-ui-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: var(--bg-header);
    border-bottom: 1px solid var(--border);
}

.preview-ui-dots {
    display: flex;
    gap: 4px;
}

.preview-ui-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.preview-ui-tabs {
    display: flex;
    gap: 4px;
    margin-left: 12px;
}

.preview-ui-tab {
    padding: 4px 10px;
    font-size: 10px;
    background: var(--bg-panel);
    border-radius: 4px 4px 0 0;
    border: 1px solid var(--border);
    border-bottom: none;
}

.preview-ui-tab.active {
    background: var(--bg-input);
}

.preview-ui-actions {
    margin-left: auto;
    display: flex;
    gap: 6px;
}

.preview-ui-btn {
    padding: 4px 8px;
    font-size: 10px;
    border-radius: 4px;
    border: 1px solid var(--border);
}

.preview-ui-btn.primary {
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-color: var(--accent);
}

.preview-ui-main {
    flex: 1;
    display: grid;
    grid-template-columns: 1fr 200px;
    overflow: hidden;
}

.preview-ui-editor {
    padding: 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    line-height: 1.6;
    overflow: hidden;
}

.preview-ui-sidebar {
    display: flex;
    flex-direction: column;
    border-left: 1px solid var(--border);
}

.preview-ui-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.preview-ui-panel-header {
    padding: 6px 10px;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    border-bottom: 1px solid var(--border);
}

.preview-ui-panel-body {
    flex: 1;
    padding: 8px;
    font-size: 10px;
    overflow: hidden;
}

.preview-ui-terminal {
    border-top: 1px solid var(--border);
}

.preview-ui-terminal-header {
    padding: 6px 10px;
    font-size: 10px;
    font-weight: 600;
}

.preview-ui-terminal-body {
    padding: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
}

.preview-ui-statusbar {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 12px;
    font-size: 10px;
    border-top: 1px solid var(--border);
}

.preview-ui-status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--success);
}

@media (max-width: 1200px) {
    .customizer-body {
        grid-template-columns: 1fr;
    }

    .customizer-preview-section {
        max-height: 400px;
    }
}

@media (max-width: 768px) {
    .marketplace-grid {
        grid-template-columns: 1fr;
    }

    .fullscreen-popup-actions {
        display: none;
    }

    .theme-carousel-card {
        width: 120px;
    }

    .theme-carousel-preview {
        height: 60px;
    }
}

/* ============================================================================
   THEME CUSTOMIZER v3.0 (tc- classes)
   ============================================================================ */

.tc-popup {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

.tc-popup.visible {
    opacity: 1;
    pointer-events: all;
}

.tc-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(16px);
}

.tc-container {
    position: relative;
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 12px;
    width: 95%;
    height: 90%;
    max-width: 1600px;
    max-height: 900px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    transform: scale(0.95);
    transition: transform 0.3s ease;
}

.tc-popup.visible .tc-container {
    transform: scale(1);
}

.tc-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px 24px;
    border-bottom: 1px solid var(--border);
    background: var(--bg-header);
    border-radius: 12px 12px 0 0;
}

.tc-title {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    flex: 1;
}

.tc-header-actions {
    display: flex;
    gap: 8px;
}

.tc-close {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.tc-close:hover {
    background: var(--error);
    color: #fff;
}

.tc-body {
    flex: 1;
    display: grid;
    grid-template-columns: 1fr 400px;
    gap: 0;
    overflow: hidden;
    transition: grid-template-columns 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.tc-controls-section.collapsed {
    width: 0;
    min-width: 0;
    padding: 0;
    border: none;
}

.tc-preview-section {
    display: flex;
    flex-direction: column;
    padding: 24px;
    background: var(--bg-ocean-light, #e8f4fc);
    border-right: 1px solid var(--border);
    overflow: hidden;
    position: relative;
    gap: 12px;
}

.tc-preview-hint-top {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 16px;
    background: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(8px);
    border-radius: 8px;
    font-size: 12px;
    color: var(--text-primary, #2a5a75);
    font-weight: 500;
    border: 1px solid rgba(255, 255, 255, 0.8);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    z-index: 10;
    position: relative;
}

/* Background pattern s c set ng qua inline style */
.tc-preview-section {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

.tc-preview-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(1px);
    z-index: 0;
    pointer-events: none;
}

.tc-preview-wrapper {
    flex: 1;
    border-radius: 12px;
    overflow: hidden;
    position: relative;
    border: 2px solid var(--border);
    background: var(--bg-panel);
    min-height: 0;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    z-index: 1;
}

.tc-controls-section {
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: var(--bg-panel);
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    min-width: 400px;
}

.tc-controls-section.collapsed {
    min-width: 0;
    width: 0;
    overflow: hidden;
    padding: 0;
    border: none;
}

.tc-sidebar-toggle {
    position: absolute;
    left: -20px;
    top: 50%;
    transform: translateY(-50%);
    width: 24px;
    height: 48px;
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-right: none;
    border-radius: 6px 0 0 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    transition: all 0.3s ease;
    z-index: 10;
}

.tc-sidebar-toggle:hover {
    background: var(--bg-input);
    color: var(--accent);
    border-color: var(--accent);
}

.tc-controls-section.collapsed .tc-sidebar-toggle {
    left: 0;
    border-radius: 0 6px 6px 0;
    border-left: none;
    border-right: 1px solid var(--border);
}

.tc-controls-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

.tc-section {
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 8px;
    margin-bottom: 12px;
    overflow: hidden;
}

.tc-section:last-child {
    margin-bottom: 0;
}

.tc-section-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 16px;
    cursor: pointer;
    user-select: none;
    transition: background 0.2s;
}

.tc-section-header:hover {
    background: rgba(255, 255, 255, 0.05);
}

.tc-section-icon {
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.tc-section-title {
    flex: 1;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
}

.tc-section-toggle {
    font-size: 18px;
    color: var(--text-muted);
    width: 20px;
    text-align: center;
}

.tc-section-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease, padding 0.3s ease;
    opacity: 0;
    padding-top: 0;
    padding-bottom: 0;
}

.tc-section.expanded .tc-section-content {
    max-height: 2000px;
    opacity: 1;
    padding-top: 16px;
    padding-bottom: 0;
}

.tc-section-content {
    padding: 0 16px 16px;
}

.tc-field {
    margin-bottom: 12px;
}

.tc-field:last-child {
    margin-bottom: 0;
}

.tc-field label {
    display: block;
    margin-bottom: 6px;
    font-size: 11px;
    color: var(--text-secondary);
    font-weight: 500;
}

.tc-field input[type="text"],
.tc-field select {
    width: 100%;
    padding: 8px 12px;
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-primary);
    font-size: 12px;
    font-family: inherit;
}

.tc-field-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.tc-color-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 10px 12px;
    margin-bottom: 8px;
    background: var(--bg-panel);
    border-radius: 6px;
    border: 1px solid transparent;
    transition: all 0.2s;
}

.tc-color-row:hover {
    border-color: var(--accent, #88c9ea);
    background: rgba(136, 201, 234, 0.1);
    transform: translateX(2px);
}

.tc-color-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.tc-color-label {
    display: block;
    font-size: 12px;
    font-weight: 600;
    color: var(--text-primary);
}

.tc-color-desc {
    display: block;
    font-size: 10px;
    color: var(--text-muted);
    line-height: 1.3;
}

.tc-color-dot {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 3px solid var(--border);
    flex-shrink: 0;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.tc-color-dot:hover {
    transform: scale(1.15);
    border-color: var(--accent);
    box-shadow: 0 0 0 3px var(--accent), 0 4px 12px rgba(0, 0, 0, 0.2);
}

.tc-color-input {
    width: 40px;
    height: 32px;
    border: 1px solid var(--border);
    border-radius: 4px;
    cursor: pointer;
    padding: 0;
    flex-shrink: 0;
}

.tc-color-text {
    width: 80px;
    padding: 6px 8px;
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-primary);
    font-size: 11px;
    font-family: 'JetBrains Mono', monospace;
    flex-shrink: 0;
}

.tc-field-hint {
    font-size: 10px;
    color: var(--text-muted);
    margin-top: 4px;
    line-height: 1.4;
}

.tc-bg-image-control {
    display: flex;
    gap: 8px;
    align-items: center;
}

.tc-bg-image-control .tc-btn {
    flex: 1;
}

/* Color Picker Popup */
.tc-color-picker-popup {
    position: fixed;
    z-index: 10002;
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 12px;
    box-shadow: 0 12px 48px rgba(0, 0, 0, 0.3);
    width: 240px;
    display: none;
    opacity: 0;
    transform: scale(0.9) translateY(-10px);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.tc-color-picker-popup.visible {
    opacity: 1;
    transform: scale(1) translateY(0);
}

.tc-color-picker-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border);
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
}

.tc-color-picker-close {
    background: none;
    border: none;
    font-size: 20px;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0;
    line-height: 1;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all 0.2s;
}

.tc-color-picker-close:hover {
    background: var(--error);
    color: #fff;
}

.tc-color-picker-body {
    padding: 16px;
    display: flex;
    gap: 12px;
    align-items: center;
}

.tc-color-picker-body input[type="color"] {
    width: 60px;
    height: 48px;
    border: 2px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    padding: 0;
    flex-shrink: 0;
}

.tc-color-picker-body input[type="text"] {
    flex: 1;
    padding: 10px 12px;
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 13px;
    font-family: 'JetBrains Mono', monospace;
}

.tc-color-picker-footer {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    padding: 12px 16px;
    border-top: 1px solid var(--border);
}

.tc-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    padding: 16px 24px;
    border-top: 1px solid var(--border);
    background: var(--bg-header);
    border-radius: 0 0 12px 12px;
}

/* Fix sakura theme footer text color */
body[data-theme="sakura"] .tc-footer .tc-btn {
    color: var(--text-primary);
}

body[data-theme="sakura"] .tc-footer .tc-btn.primary {
    color: #ffffff;
}

.tc-save-group {
    display: flex;
    gap: 8px;
}

.tc-btn {
    padding: 8px 16px;
    font-size: 13px;
    font-weight: 500;
    border: 1px solid var(--border);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
    background: var(--bg-input);
    color: var(--text-primary);
}

.tc-btn:hover {
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-color: var(--accent);
}

.tc-btn.primary {
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-color: var(--accent);
}

.tc-btn.primary:hover {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
}

.tc-btn.secondary {
    background: var(--bg-input);
    color: var(--text-primary);
}

.tc-btn.secondary:hover {
    background: var(--bg-panel);
}

/* Live IDE Preview */
.tc-live-ide {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    font-size: 11px;
    position: relative;
    border-radius: 12px;
    overflow: hidden;
}

.tc-ide-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0.4;
    z-index: 0;
    pointer-events: none;
    will-change: opacity, filter;
    backface-visibility: hidden;
    transform: translateZ(0);
}

/* Clickable elements */
.tc-clickable {
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
    border-radius: 6px;
}

.tc-clickable:hover {
    outline: 2px dashed var(--accent, #88c9ea);
    outline-offset: 2px;
    z-index: 10;
}

.tc-clickable:hover::after {
    content: attr(data-color-label);
    position: absolute;
    top: -28px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--accent, #88c9ea);
    color: #fff;
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 10px;
    font-weight: 600;
    white-space: nowrap;
    z-index: 100;
    pointer-events: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.tc-clickable.tc-highlight {
    outline: 3px solid var(--accent, #88c9ea);
    outline-offset: 3px;
    animation: tc-pulse 0.6s ease;
}

@keyframes tc-pulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.02);
    }
}

.tc-ide-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    z-index: 1;
    position: relative;
    border-radius: 12px 12px 0 0;
}

.tc-ide-logo {
    font-weight: 700;
    font-size: 13px;
    border-radius: 6px;
    padding: 2px 6px;
}

.tc-ide-tabs {
    display: flex;
    gap: 4px;
    margin-left: 12px;
}

.tc-ide-tab {
    padding: 4px 10px;
    font-size: 10px;
    border-radius: 8px 8px 0 0;
    border: 1px solid transparent;
    border-bottom: none;
    transition: all 0.2s;
}

.tc-ide-tab.active {
    border-color: currentColor;
}

.tc-ide-actions {
    margin-left: auto;
    display: flex;
    gap: 6px;
}

.tc-ide-btn {
    padding: 4px 10px;
    font-size: 10px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 4px;
    transition: all 0.2s;
    font-weight: 500;
}

.tc-ide-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.tc-ide-main {
    flex: 1;
    display: grid;
    grid-template-columns: 1fr 180px;
    overflow: hidden;
    z-index: 1;
    position: relative;
    margin-bottom: 8px;
}

.tc-ide-gap {
    height: 8px;
    z-index: 0;
    position: relative;
}

.tc-ide-terminal-wrapper {
    width: 100%;
    max-width: calc(100% - 180px);
    margin-bottom: 8px;
    z-index: 1;
    position: relative;
}

.tc-ide-editor {
    padding: 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    line-height: 1.6;
    overflow: auto;
}

.tc-ide-code {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.tc-code-line {
    display: flex;
    gap: 8px;
}

.tc-code-line .ln {
    width: 24px;
    text-align: right;
    flex-shrink: 0;
    user-select: none;
}

.tc-ide-sidebar {
    display: flex;
    flex-direction: column;
    border-left: 1px solid var(--border);
}

.tc-ide-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    margin: 8px;
    border-radius: 8px;
    overflow: hidden;
}

.tc-panel-header {
    padding: 6px 10px;
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.tc-panel-body {
    flex: 1;
    padding: 8px;
    font-size: 10px;
    font-family: 'JetBrains Mono', monospace;
}

.tc-ide-terminal {
    z-index: 1;
    position: relative;
    border-radius: 8px;
    overflow: hidden;
}

.tc-term-header {
    padding: 6px 10px;
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.tc-term-body {
    padding: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.tc-ide-status {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 12px;
    font-size: 9px;
    border-top: 1px solid var(--border);
    z-index: 1;
    position: relative;
}

.tc-status-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
}

@media (max-width: 1200px) {
    .tc-body {
        grid-template-columns: 1fr;
    }

    .tc-preview-section {
        max-height: 400px;
        border-right: none;
        border-bottom: 1px solid var(--border);
    }
}

/* ============================================================================
   THEME CUSTOMIZER v4.0 FIXES
   ============================================================================ */

/* Small button variant */
.tc-btn-sm,
.tc-btn.tc-btn-sm {
    padding: 6px 12px;
    font-size: 11px;
    font-weight: 600;
}

/* Slider styling */
.tc-slider {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: var(--bg-input);
    outline: none;
    cursor: pointer;
}

.tc-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    border: 2px solid var(--bg-panel);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    transition: transform 0.15s ease;
}

.tc-slider::-webkit-slider-thumb:hover {
    transform: scale(1.1);
}

.tc-slider::-moz-range-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    border: 2px solid var(--bg-panel);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

/* Fixed color picker text input - prevent overflow */
.tc-color-picker-body input[type="text"] {
    flex: 1;
    min-width: 0;
    max-width: 140px;
    padding: 8px 10px;
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 12px;
    font-family: 'JetBrains Mono', monospace;
    box-sizing: border-box;
}

/* Color picker popup improved sizing */
.tc-color-picker-popup {
    width: 220px;
    max-width: 90vw;
}

.tc-color-picker-body {
    padding: 12px;
    gap: 10px;
}

.tc-color-picker-body input[type="color"] {
    width: 50px;
    height: 40px;
    flex-shrink: 0;
}

.tc-color-picker-footer {
    padding: 10px 12px;
    gap: 6px;
}

/* Close button styling */
.tc-close {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.tc-close:hover {
    background: var(--error);
    color: #fff;
}

/* Fixed color text input width */
.tc-color-text {
    width: 70px;
    min-width: 70px;
    max-width: 70px;
    padding: 6px 6px;
    font-size: 10px;
}

/* ============================================================================
   MARKETPLACE STYLING FIXES - Bold Cute Style
   ============================================================================ */

/* Marketplace section title - bolder, cuter */
.mp-section-title {
    font-size: 16px;
    font-weight: 700;
    font-family: 'Fredoka', 'Nunito', sans-serif;
    color: var(--text-primary);
    margin-bottom: 16px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--border);
    position: relative;
    z-index: 1;
    background: var(--bg-panel);
}

/* Section spacing fix - prevent overlay */
.mp-section {
    margin-bottom: 28px;
    position: relative;
    padding-top: 4px;
}

/* Card styling - cuter, bolder */
.mp-card {
    background: var(--bg-input);
    border: 2px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.2s ease;
}

.mp-card:hover {
    border-color: var(--accent);
    transform: translateY(-3px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

.mp-card.active {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px var(--accent);
}

/* Card name - bold cute font */
.mp-card-name {
    font-size: 14px;
    font-weight: 700;
    font-family: 'Fredoka', 'Nunito', sans-serif;
    color: var(--text-primary);
    margin-bottom: 4px;
}

/* Card info padding */
.mp-card-info {
    padding: 14px;
    background: var(--bg-panel);
}

/* Button styling - match bold cute style */
.mp-btn {
    flex: 1;
    min-width: 55px;
    padding: 7px 10px;
    font-size: 11px;
    font-weight: 600;
    font-family: 'Nunito', sans-serif;
    border: 1px solid var(--border);
    background: var(--bg-input);
    color: var(--text-primary);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

.mp-btn:hover {
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-color: var(--accent);
    transform: translateY(-1px);
}

.mp-btn-apply {
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-color: var(--accent);
}

.mp-btn-apply:hover {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
}

/* Active badge */
.mp-active-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    font-size: 10px;
    font-weight: 700;
    font-family: 'Nunito', sans-serif;
    padding: 3px 10px;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}

/* Marketplace popup header actions - cleaner */
.fullscreen-popup-actions {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.fullscreen-popup-actions .btn-secondary,
.fullscreen-popup-actions .btn-primary {
    font-size: 12px;
    font-weight: 600;
    font-family: 'Nunito', sans-serif;
    padding: 8px 14px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Theme action buttons in Appearance - removed duplicate, see above */

/* Theme carousel card - match style */
.theme-carousel-card {
    flex-shrink: 0;
    width: 140px;
    background: var(--bg-input);
    border: 2px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.2s ease;
}

.theme-carousel-card:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
}

.theme-carousel-card.active {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent);
}

.theme-carousel-name {
    font-size: 11px;
    font-weight: 700;
    font-family: 'Nunito', sans-serif;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.theme-carousel-info {
    padding: 8px;
    text-align: center;
    background: var(--bg-panel);
}

/* Marketplace list background fix */
.marketplace-themes-list {
    padding: 24px;
    background: transparent;
    min-height: 100%;
}

/* Grid layout improvement */
.mp-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 16px;
}

/* Fullscreen popup body fix */
.fullscreen-popup-body {
    flex: 1;
    overflow-y: auto;
    background: var(--bg-panel);
}

/* ============================================================================
   THEME CUSTOMIZER v4.0 - Live Preview & Enhanced UI
   ============================================================================ */

/* Live Preview Container */
.tc-preview-wrapper {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    background-size: cover;
    background-position: center;
    position: relative;
    transition: all 0.3s ease;
}

/* Background edit mode */
.tc-preview-section.tc-bg-edit-mode {
    position: relative;
    z-index: 10;
}

.tc-preview-section.tc-bg-edit-mode .tc-preview-wrapper {
    opacity: 0.3;
    pointer-events: none;
}

.tc-preview-section.tc-bg-edit-mode::after {
    content: 'Double-click to exit edit mode  Drag to move background  Press ESC to exit';
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--accent);
    color: #fff;
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
    z-index: 100;
    pointer-events: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.tc-preview-wrapper.tc-preview-fullview {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 10002 !important;
    border-radius: 0 !important;
}

/* Preview Header */
.tc-preview-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    flex-shrink: 0;
}

.tc-preview-logo {
    padding: 4px 8px;
    border-radius: 4px;
    font-weight: 700;
    font-size: 11px;
}

.tc-preview-tabs {
    flex: 1;
    display: flex;
    gap: 4px;
}

.tc-preview-tab {
    padding: 4px 10px;
    border-radius: 4px 4px 0 0;
    font-size: 10px;
    font-weight: 500;
    border: 1px solid transparent;
    border-bottom: none;
    margin-bottom: -1px;
}

.tc-preview-tab.active {
    border-color: currentColor;
}

.tc-preview-actions {
    display: flex;
    gap: 4px;
}

.tc-preview-btn {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 9px;
    font-weight: 600;
}

/* Preview Editor */
.tc-preview-editor {
    flex: 1;
    padding: 10px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    line-height: 1.7;
    overflow: hidden;
    min-height: 120px;
}

.tc-preview-line {
    display: flex;
    align-items: center;
    gap: 8px;
}

.tc-preview-ln {
    width: 20px;
    text-align: right;
    font-size: 10px;
    user-select: none;
}

/* Preview Terminal */
.tc-preview-terminal {
    padding: 8px 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
}

.tc-preview-term-header {
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 4px;
}

.tc-preview-term-output {
    line-height: 1.5;
}

/* Preview Status Bar */
.tc-preview-status {
    display: flex;
    justify-content: space-between;
    padding: 4px 12px;
    font-size: 9px;
}

/* Background Tab Styles */
.tc-upload-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: var(--bg-button);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s;
}

.tc-upload-btn:hover {
    background: var(--bg-button-hover);
    border-color: var(--accent);
}

.tc-reset-btn {
    padding: 8px 14px;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-secondary);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.15s;
}

.tc-reset-btn:hover {
    background: var(--error);
    color: #fff;
    border-color: var(--error);
}

.tc-hint {
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 12px;
}

.tc-position-controls {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.tc-position-row {
    display: flex;
    align-items: center;
    gap: 10px;
}

.tc-position-row label {
    width: 70px;
    font-size: 11px;
    color: var(--text-secondary);
}

.tc-position-row input[type="range"] {
    flex: 1;
    height: 6px;
    -webkit-appearance: none;
    appearance: none;
    background: var(--bg-button);
    border-radius: 3px;
}

.tc-position-row input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
}

.tc-position-row span {
    width: 40px;
    text-align: right;
    font-size: 11px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
}

/* Customizer Section Select */
.customizer-section select {
    width: 100%;
    padding: 8px 12px;
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text-primary);
    font-size: 12px;
}

/* Color Picker Popover Fixes */
.color-picker-popover {
    width: 220px;
}

.color-picker-body {
    padding: 12px;
    display: flex;
    gap: 10px;
    align-items: stretch;
}

.color-picker-body input[type="color"] {
    width: 48px;
    height: 36px;
    border: 1px solid var(--border);
    border-radius: 6px;
    cursor: pointer;
    padding: 2px;
    flex-shrink: 0;
}

.color-picker-body input[type="text"] {
    flex: 1;
    min-width: 0;
    padding: 8px 10px;
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 12px;
    font-family: 'JetBrains Mono', monospace;
}

.color-picker-footer {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    padding: 10px 12px;
    border-top: 1px solid var(--border);
}

.btn-sm {
    padding: 6px 12px;
    font-size: 11px;
    border-radius: 4px;
    border: 1px solid var(--border);
    cursor: pointer;
    transition: all 0.15s;
}

.btn-sm.btn-secondary {
    background: var(--bg-button);
    color: var(--text-secondary);
}

.btn-sm.btn-secondary:hover {
    background: var(--bg-button-hover);
    color: var(--text-primary);
}

.btn-sm.btn-primary {
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-color: var(--accent);
}

.btn-sm.btn-primary:hover {
    background: var(--accent-hover);
}

/* Marketplace Section Title */
.mp-section-title {
    font-size: 14px;
    font-weight: 700;
    font-family: 'Nunito', sans-serif;
    color: var(--text-primary);
    margin: 0 0 16px 0;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--border);
}

/* MP Card improvements */
.mp-card {
    background: var(--bg-input);
    border: 2px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    transition: all 0.2s;
}

.mp-card:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
}

.mp-card.active {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent);
}

.mp-card-preview {
    height: 80px;
    position: relative;
}

.mp-active-badge {
    position: absolute;
    top: 6px;
    right: 6px;
    padding: 2px 8px;
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    font-size: 9px;
    font-weight: 700;
    border-radius: 4px;
}

.mp-card-info {
    padding: 10px;
    background: var(--bg-panel);
}

.mp-card-name {
    font-size: 13px;
    font-weight: 700;
    font-family: 'Nunito', sans-serif;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.mp-card-desc {
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 6px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.mp-card-meta {
    display: flex;
    gap: 8px;
    font-size: 10px;
    color: var(--text-muted);
    margin-bottom: 10px;
}

.mp-card-actions {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
}

.mp-btn {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    font-size: 11px;
    font-weight: 700;
    font-family: 'Nunito', sans-serif;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: var(--bg-button);
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.15s;
}

.mp-btn:hover {
    background: var(--bg-button-hover);
}

.mp-btn.mp-btn-apply {
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-color: var(--accent);
}

.mp-btn.mp-btn-apply:hover:not(.disabled) {
    background: var(--accent-hover);
}

.mp-btn.mp-btn-apply.disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.mp-btn.danger:hover {
    background: var(--error);
    color: #fff;
    border-color: var(--error);
}

/* Theme Carousel Meta */
.theme-carousel-meta {
    display: flex;
    gap: 4px;
    justify-content: center;
    margin-top: 2px;
}

.theme-carousel-type {
    font-size: 9px;
    color: var(--text-muted);
    text-transform: capitalize;
}

.theme-carousel-badge {
    font-size: 8px;
    padding: 1px 4px;
    background: var(--accent);
    color: var(--button-text-on-accent, #fff);
    border-radius: 3px;
    font-weight: 600;
}

/* Customizer Preview Hint */
.customizer-preview-hint {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 10px;
    padding: 8px 12px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    font-size: 11px;
    color: var(--text-muted);
}

/* Theme pills - fix font */
.theme-pill {
    flex-shrink: 0;
    width: 140px;
    background: var(--bg-input);
    border: 2px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    flex-direction: column;
}

.theme-pill:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
}

.theme-pill.active {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent);
}

.theme-pill-swatch {
    height: 60px;
    border-bottom: 1px solid var(--border);
}

.theme-pill-title {
    padding: 8px;
    text-align: center;
    background: var(--bg-panel);
}

.theme-pill-name {
    font-size: 11px;
    font-weight: 700;
    font-family: 'Nunito', sans-serif;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 2px;
}

.theme-pill-meta {
    font-size: 9px;
    color: var(--text-muted);
}

/* ============================================================================ */
/* THEME CUSTOMIZER V4 (Redesigned) */
/* ============================================================================ */
#theme-customizer-v4 {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(4px);
    font-family: 'Nunito', sans-serif;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
}

#theme-customizer-v4.visible {
    opacity: 1;
    pointer-events: auto;
}

.tc-window {
    width: 900px;
    height: 600px;
    background: var(--bg-panel, #fff);
    border: 2px solid var(--border, #eee);
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.tc-titlebar {
    height: 54px;
    background: var(--bg-header, #f5f5f5);
    border-bottom: 1px solid var(--border, #eee);
    display: flex;
    align-items: center;
    padding: 0 20px;
    justify-content: space-between;
}

.tc-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary, #333);
    display: flex;
    align-items: center;
    gap: 12px;
}

.tc-actions {
    display: flex;
    gap: 10px;
}

.tc-btn {
    padding: 6px 14px;
    border-radius: 10px;
    border: 1px solid var(--border, #ddd);
    background: var(--bg-button, #fff);
    color: var(--text-secondary, #666);
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
}

.tc-btn:hover {
    background: var(--bg-button-hover, #f0f0f0);
    color: var(--text-primary, #333);
}

.tc-btn.primary {
    background: var(--bg-ocean-deep, #007acc);
    color: #fff;
    border: none;
}

.tc-btn.primary:hover {
    filter: brightness(1.1);
}

.tc-content {
    flex: 1;
    display: flex;
    overflow: hidden;
}

.tc-sidebar {
    width: 280px;
    background: var(--bg-panel, #fff);
    border-right: 1px solid var(--border, #eee);
    display: flex;
    flex-direction: column;
}

.tc-tabs {
    display: flex;
    padding: 10px;
    gap: 6px;
    overflow-x: auto;
    border-bottom: 1px solid var(--border, #eee);
    background: var(--bg-glass-heavy, #fafafa);
}

/* Compact Tabs styling */
.tc-tab {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    cursor: pointer;
    color: var(--text-muted, #999);
    transition: 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
}

.tc-tab:hover {
    background: var(--bg-button-hover, #eee);
    color: var(--text-primary, #333);
}

.tc-tab.active {
    background: var(--bg-ocean-medium, #e0f0ff);
    color: var(--bg-ocean-dark, #007acc);
}

.tc-controls-wrapper {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
}

.tc-properties-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
}

.tc-color-card {
    background: var(--bg-input, #fff);
    border: 1px solid var(--border, #eee);
    border-radius: 12px;
    padding: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    transition: 0.2s;
}

.tc-color-card:hover {
    border-color: var(--accent, #007acc);
    background: var(--bg-button-hover, #e0f0ff);
}

.tc-color-preview {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 1px solid rgba(0, 0, 0, 0.1);
    flex-shrink: 0;
}

.tc-color-info {
    display: flex;
    flex-direction: column;
    min-width: 0;
}

.tc-color-name {
    font-size: 11px;
    font-weight: 700;
    color: var(--text-primary, #333);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.tc-color-desc {
    font-size: 10px;
    color: var(--text-muted, #999);
}

.tc-preview-pane {
    flex: 1;
    background: #1e1e1e;
    /* Consistent dark bg for preview container */
    padding: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}

/* Background edit mode interaction */
.tc-bg-edit-hint {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.6);
    color: white;
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 12px;
    opacity: 0;
    transition: 0.3s;
    pointer-events: none;
}

.tc-bg-edit-mode .tc-bg-edit-hint {
    opacity: 1;
}

/* Color Picker Popup Styles */
.tc-cp-popup {
    position: fixed;
    background: var(--bg-panel, #fff);
    border: 1px solid var(--border, #eee);
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    padding: 16px;
    z-index: 10001;
    display: none;
    width: 240px;
    animation: slideUp 0.2s ease-out;
}

.tc-cp-popup.show {
    display: block;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}