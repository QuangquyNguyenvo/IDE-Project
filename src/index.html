<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C++ IDE</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&family=Nunito:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles/theme.css">
    <link rel="stylesheet" href="styles/suggest-fix.css">
    <link rel="stylesheet" href="styles/snippet-editor.css">
    <link rel="stylesheet" href="styles/themes.css">
    <link rel="stylesheet" href="styles/local-history.css">
    <link rel="stylesheet" href="../node_modules/monaco-editor/min/vs/editor/editor.main.css">
</head>

<body>
    <div class="app-container">

        <!-- ===== HEADER ===== -->
        <div class="header-bar">
            <div class="logo">C++</div>

            <!-- Explorer toggle button -->
            <button class="toggle-btn explorer-toggle" id="btn-toggle-explorer" title="File Explorer (Ctrl+E)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z" />
                </svg>
            </button>

            <!-- Hamburger menu for small screens -->
            <button class="hamburger-btn" id="btn-hamburger" title="Menu">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
                    <path d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>

            <div class="menu-group" id="menu-group">
                <button class="menu-btn" data-menu="file">File</button>
                <button class="menu-btn" data-menu="edit">Edit</button>
                <button class="menu-btn" data-menu="view">View</button>
                <button class="menu-btn" data-menu="run">Run</button>
            </div>

            <div class="tabs-wrap">
                <div class="tabs-container" id="tabs-container"></div>
                <button class="tab-add" id="btn-new-tab" title="New File (Ctrl+N)">+</button>
            </div>

            <div class="header-actions">
                <!-- Toggle buttons -->
                <button class="toggle-btn" id="btn-toggle-io" title="Hiện Input/Expected">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <rect x="3" y="3" width="7" height="8" rx="1.5" />
                        <rect x="3" y="13" width="7" height="8" rx="1.5" />
                        <path d="M14 7h6M14 12h4M14 17h5" />
                    </svg>
                </button>
                <button class="toggle-btn active" id="btn-toggle-term" title="Hiện Terminal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M4 17l6-5-6-5" />
                        <path d="M12 19h8" />
                    </svg>
                </button>
                <button class="toggle-btn" id="btn-toggle-problems" title="Hiện khung lỗi (Ctrl+J)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10" />
                        <path d="M12 8v4M12 16h.01" />
                    </svg>
                </button>
                <button class="toggle-btn" id="btn-cc" title="Lấy test case tự động từ OJ">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2" />
                        <rect x="9" y="3" width="6" height="4" rx="1" />
                        <path d="M9 12l2 2 4-4" />
                    </svg>
                </button>

                <span class="sep"></span>

                <!-- Run buttons -->
                <button class="action-btn primary" id="btn-buildrun" title="Biên dịch và chạy (F11)">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                    <span>Run</span>
                </button>
                <button class="action-btn" id="btn-run-only" title="Chỉ chạy (F10)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <path d="M5 4l12 8-12 8V4z" />
                    </svg>
                </button>
                <button class="action-btn danger" id="btn-stop" title="Dừng chương trình" disabled>
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <rect x="5" y="5" width="14" height="14" rx="2" />
                    </svg>
                </button>

                <span class="sep"></span>

                <!-- Settings button -->
                <button class="toggle-btn" id="btn-settings" title="Cài đặt (Ctrl+,)" style="position: relative;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3" />
                        <path
                            d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
                    </svg>
                    <span class="badge-dot" id="badge-settings-main"
                        style="display:none; position:absolute; top:6px; right:6px; background:var(--error); width:8px; height:8px; border-radius:50%; border:1px solid var(--bg-primary);"></span>
                </button>
            </div>

            <span class="sep"></span>

            <!-- Windows buttons -->
            <div class="win-btns">
                <button class="win-btn" id="btn-min" title="Minimize">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14" />
                    </svg>
                </button>
                <button class="win-btn" id="btn-max" title="Maximize">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="5" y="5" width="14" height="14" rx="2" />
                    </svg>
                </button>
                <button class="win-btn close" id="btn-close" title="Close">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 6l12 12M18 6L6 18" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Dropdowns -->
        <div class="dropdown" id="menu-file">
            <div class="dropdown-item" data-action="new"><span>New File</span><span class="key">Ctrl+N</span></div>
            <div class="dropdown-item" data-action="open"><span>Open</span><span class="key">Ctrl+O</span></div>
            <div class="dropdown-item" data-action="save"><span>Save</span><span class="key">Ctrl+S</span></div>
            <div class="dropdown-sep"></div>
            <div class="dropdown-item" data-action="localhistory"><span>Checkpoints</span></div>
            <div class="dropdown-sep"></div>
            <div class="dropdown-item" data-action="exit"><span>Exit</span></div>
        </div>
        <div class="dropdown" id="menu-edit">
            <div class="dropdown-item" data-action="undo"><span>Undo</span><span class="key">Ctrl+Z</span></div>
            <div class="dropdown-item" data-action="redo"><span>Redo</span><span class="key">Ctrl+Y</span></div>
            <div class="dropdown-sep"></div>
            <div class="dropdown-item" data-action="find"><span>Find</span><span class="key">Ctrl+F</span></div>
        </div>
        <div class="dropdown" id="menu-view">
            <div class="dropdown-item" data-action="toggleexplorer"><span>File Explorer</span><span
                    class="key">Ctrl+E</span></div>
            <div class="dropdown-item" data-action="toggleio"><span>Input/Output</span></div>
            <div class="dropdown-item" data-action="toggleterm"><span>Terminal</span></div>
            <div class="dropdown-item" data-action="toggleproblems"><span>Problems</span><span class="key">Ctrl+J</span>
            </div>
            <div class="dropdown-sep"></div>
            <div class="dropdown-item" data-action="spliteditor"><span>Split</span><span class="key">Ctrl+\</span></div>
            <div class="dropdown-item" data-action="swapsplit"><span>Swap</span><span class="key">Ctrl+⇧+\</span></div>
            <div class="dropdown-item" data-action="closesplit"><span>Close Split</span></div>
            <div class="dropdown-sep"></div>
            <div class="dropdown-item" data-action="settings"><span>Settings</span><span class="key">Ctrl+,</span></div>
        </div>
        <div class="dropdown" id="menu-run">
            <div class="dropdown-item" data-action="buildrun"><span>Build & Run</span><span class="key">F11</span></div>
            <div class="dropdown-item" data-action="run"><span>Run</span><span class="key">F10</span></div>
            <div class="dropdown-sep"></div>
            <div class="dropdown-item" data-action="stop"><span>Stop</span><span class="key">Shift+F5</span></div>
        </div>

        <!-- ===== COMPETITIVE COMPANION POPUP ===== -->
        <div class="cc-overlay" id="cc-overlay">
            <div class="cc-popup">
                <div class="cc-header">
                    <h2>
                        <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path
                                d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z" />
                        </svg>
                        Lấy test từ OJ
                    </h2>
                    <button class="cc-close" id="cc-close">×</button>
                </div>
                <div class="cc-body">
                    <div class="cc-steps">
                        <div class="cc-step">
                            <span class="cc-step-num">1</span>
                            <span class="cc-step-text">Cài extension <strong>Competitive Companion</strong> vào
                                Chrome/Firefox</span>
                        </div>
                        <div class="cc-step">
                            <span class="cc-step-num">2</span>
                            <span class="cc-step-text">Mở bài tập trên trang OJ bất kỳ</span>
                        </div>
                        <div class="cc-step">
                            <span class="cc-step-num">3</span>
                            <span class="cc-step-text">Click icon <strong>+</strong> của extension trên trình
                                duyệt</span>
                        </div>
                        <div class="cc-step">
                            <span class="cc-step-num">4</span>
                            <span class="cc-step-text">Test cases sẽ <strong>tự động tải</strong> vào IDE!</span>
                        </div>
                    </div>
                </div>
                <div class="cc-footer">
                    <button class="cc-btn secondary" id="cc-cancel">Đóng</button>
                    <button class="cc-btn primary" id="cc-install">Cài Extension</button>
                </div>
            </div>
        </div>

        <!-- ===== UPDATE NOTIFICATION POPUP ===== -->
        <div class="update-overlay" id="update-overlay">
            <div class="update-popup">
                <div class="update-header">
                    <h2>
                        <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" />
                        </svg>
                        Có phiên bản mới!
                    </h2>
                    <button class="update-close" id="update-close">×</button>
                </div>
                <div class="update-body">
                    <div class="update-version">
                        <span class="update-current" id="update-current">v1.0.0</span>
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7" />
                        </svg>
                        <span class="update-new" id="update-new">v1.0.1</span>
                    </div>
                    <div class="update-notes" id="update-notes">
                        <!-- Release notes will be inserted here -->
                    </div>
                </div>
                <div class="update-footer">
                    <button class="update-btn secondary" id="update-later">Để sau</button>
                    <button class="update-btn primary" id="update-download">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" />
                        </svg>
                        Tải về ngay
                    </button>
                </div>
            </div>
        </div>

        <!-- ===== SETTINGS POPUP ===== -->
        <div class="settings-overlay" id="settings-overlay">
            <div class="settings-popup" id="settings-popup">
                <div class="settings-header">
                    <h2><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="3" />
                            <path
                                d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
                        </svg> Settings</h2>
                    <button class="settings-close" id="settings-close">×</button>
                </div>

                <div class="settings-container">
                    <!-- Sidebar Tabs -->
                    <div class="settings-sidebar">
                        <button class="settings-tab active" data-tab="editor">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M12 20h9M16.5 3.5a2.12 2.12 0 013 3L7 19l-4 1 1-4L16.5 3.5z" />
                            </svg>
                            Editor
                        </button>
                        <button class="settings-tab" data-tab="compiler">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z" />
                            </svg>
                            Compiler
                        </button>
                        <button class="settings-tab" data-tab="execution">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polygon points="5 3 19 12 5 21 5 3" />
                            </svg>
                            Execution
                        </button>
                        <button class="settings-tab" data-tab="appearance">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="12" cy="12" r="3" />
                                <path
                                    d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83" />
                            </svg>
                            Appearance
                        </button>
                        <button class="settings-tab" data-tab="template">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
                                <polyline points="14 2 14 8 20 8" />
                                <line x1="16" y1="13" x2="8" y2="13" />
                                <line x1="16" y1="17" x2="8" y2="17" />
                            </svg>
                            Template
                        </button>
                        <button class="settings-tab" data-tab="keybindings">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <rect x="2" y="4" width="20" height="16" rx="2" ry="2" />
                                <path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01M8 12h.01M12 12h.01M16 12h.01M7 16h10" />
                            </svg>
                            Keybindings
                        </button>
                        <button class="settings-tab" data-tab="snippets">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="16 18 22 12 16 6" />
                                <polyline points="8 6 2 12 8 18" />
                            </svg>
                            Snippets
                        </button>
                        <button class="settings-tab" data-tab="about" style="position: relative;">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                            About
                            <span class="badge-dot" id="badge-settings-tab"
                                style="display:none; position:absolute; top:10px; right:10px; background:var(--error); width:8px; height:8px; border-radius:50%;"></span>
                        </button>
                    </div>

                    <!-- Tab Content -->
                    <div class="settings-content">
                        <!-- Editor Tab -->
                        <div class="settings-panel active" id="panel-editor">
                            <h3>Editor Settings</h3>
                            <div class="setting-row">
                                <label>Font Size</label>
                                <div class="setting-control">
                                    <input type="range" id="set-fontSize" min="10" max="24" value="14">
                                    <span class="setting-value" id="val-fontSize">14px</span>
                                </div>
                            </div>
                            <div class="setting-row">
                                <label>Font Family</label>
                                <select id="set-fontFamily">
                                    <option value="'JetBrains Mono', monospace">JetBrains Mono</option>
                                    <option value="'Fira Code', monospace">Fira Code</option>
                                    <option value="Consolas, monospace" selected>Consolas</option>
                                    <option value="'Cascadia Code', monospace">Cascadia Code</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <label>Tab Size</label>
                                <select id="set-tabSize">
                                    <option value="2">2 spaces</option>
                                    <option value="4" selected>4 spaces</option>
                                    <option value="8">8 spaces</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <label>Minimap</label>
                                <label class="switch">
                                    <input type="checkbox" id="set-minimap">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-row">
                                <label>Word Wrap</label>
                                <label class="switch">
                                    <input type="checkbox" id="set-wordWrap">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-row">
                                <label>Keyword Suggestions <span class="tooltip"
                                        title="Suggest keywords like vector, cout, int...">?</span></label>
                                <label class="switch">
                                    <input type="checkbox" id="set-keywords" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-row">
                                <label>Editor Colors <span class="tooltip"
                                        title="Syntax highlighting color scheme">?</span></label>
                                <select id="set-editorColorScheme">
                                    <option value="auto">Auto (Match Theme)</option>
                                    <option value="kawaii-dark">Kawaii Dark</option>
                                    <option value="kawaii-light">Kawaii Light</option>
                                    <option value="sakura">Sakura</option>
                                    <option value="dracula">Dracula</option>
                                    <option value="monokai">Monokai</option>
                                    <option value="nord">Nord</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <label>Auto Save <span class="tooltip"
                                        title="Automatically save files after you stop typing">?</span></label>
                                <div class="setting-control">
                                    <label class="switch">
                                        <input type="checkbox" id="set-autoSave" checked>
                                        <span class="slider"></span>
                                    </label>
                                    <input type="number" id="set-autoSaveDelay" min="1" max="300" value="30"
                                        style="width:60px;margin-left:10px;text-align:center">
                                    <span>sec</span>
                                </div>
                            </div>
                            <div class="setting-row">
                                <label>Live Code Checking <span class="tooltip"
                                        title="Check for errors automatically while typing">?</span></label>
                                <div class="setting-control">
                                    <label class="switch">
                                        <input type="checkbox" id="set-liveCheck">
                                        <span class="slider"></span>
                                    </label>
                                    <input type="number" id="set-liveCheckDelay" min="500" max="5000" value="1000"
                                        style="width:90px;margin-left:10px;text-align:center">
                                    <span>ms</span>
                                </div>
                            </div>
                            <div class="setting-row">
                                <label>Intellisense (Code Suggestions) <span class="tooltip"
                                        title="Enable smart code completion for C++">?</span></label>
                                <label class="switch">
                                    <input type="checkbox" id="set-intellisense">
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <!-- Checkpoints Section -->
                            <div class="setting-section-divider"></div>
                            <h3 style="margin-top: 20px; display: flex; align-items: center; gap: 8px;">
                                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                                Checkpoints
                            </h3>
                            <p class="setting-desc" style="margin-bottom: 12px;">Backup files automatically when saving
                                to prevent data loss.</p>
                            <div class="setting-row">
                                <label>Enable Checkpoints</label>
                                <label class="switch">
                                    <input type="checkbox" id="set-localHistoryEnabled" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-row">
                                <label>Max Versions</label>
                                <div class="setting-control">
                                    <input type="number" id="set-localHistoryMaxVersions" min="5" max="100" value="20"
                                        style="width:60px;text-align:center">
                                </div>
                            </div>
                            <div class="setting-row">
                                <label>Delete After (days)</label>
                                <div class="setting-control">
                                    <input type="number" id="set-localHistoryMaxDays" min="1" max="90" value="7"
                                        style="width:60px;text-align:center">
                                </div>
                            </div>
                        </div>

                        <!-- Compiler Tab -->
                        <div class="settings-panel" id="panel-compiler">
                            <h3>Compiler Settings</h3>
                            <div class="setting-row">
                                <label>C++ Standard</label>
                                <select id="set-cppStandard">
                                    <option value="">Default (C++17)</option>
                                    <option value="c++98">C++98 (Legacy)</option>
                                    <option value="c++11">C++11</option>
                                    <option value="c++14">C++14</option>
                                    <option value="c++17">C++17</option>
                                    <option value="c++20">C++20</option>
                                    <option value="c++23">C++23</option>
                                    <option value="c++26">C++26 (Beta)</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <label>Optimization <span class="tooltip"
                                        title="None: Fast build, easy debug&#10;Fast: 2-3x faster runtime&#10;Fastest: Maximum speed">?</span></label>
                                <select id="set-optimization">
                                    <option value="" selected>None (-O0)</option>
                                    <option value="-O2">Fast (-O2)</option>
                                    <option value="-O3">Fastest (-O3)</option>
                                </select>
                            </div>
                            <div class="setting-row">
                                <label>Warnings <span class="tooltip"
                                        title="Enable -Wall -Wextra for potential issues">?</span></label>
                                <label class="switch">
                                    <input type="checkbox" id="set-warnings" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>

                        <!-- Execution Tab -->
                        <div class="settings-panel" id="panel-execution">
                            <h3>Execution Settings</h3>
                            <div class="setting-row">
                                <label>Time Limit <span class="tooltip"
                                        title="Auto-stop after X seconds&#10;Disable for games/long-running programs">?</span></label>
                                <div class="setting-control">
                                    <label class="switch">
                                        <input type="checkbox" id="set-timeLimitEnabled">
                                        <span class="slider"></span>
                                    </label>
                                    <input type="number" id="set-timeLimitSeconds" min="1" max="60" value="3"
                                        style="width:60px;margin-left:10px">
                                    <span>sec</span>
                                </div>
                            </div>
                            <div class="setting-row">
                                <label>Clear Terminal on Run</label>
                                <label class="switch">
                                    <input type="checkbox" id="set-clearTerminal" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-row">
                                <label>Auto-send Input</label>
                                <label class="switch">
                                    <input type="checkbox" id="set-autoSendInput" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-row">
                                <label>Terminal Colors <span class="tooltip"
                                        title="ANSI 16: Show colored output&#10;Disabled: Plain text only">?</span></label>
                                <select id="set-terminalColorScheme">
                                    <option value="ansi-16" selected>ANSI 16 Colors</option>
                                    <option value="ansi-256">ANSI 256 Colors</option>
                                    <option value="dracula">Dracula</option>
                                    <option value="monokai">Monokai</option>
                                    <option value="nord">Nord</option>
                                    <option value="solarized">Solarized Dark</option>
                                    <option value="disabled">Disabled (Plain)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Appearance Tab with Preview -->
                        <div class="settings-panel" id="panel-appearance">
                            <!-- Theme Selection Section -->
                            <div class="theme-section">
                                <div class="theme-section-header">
                                    <h3>Color Theme</h3>
                                    <div class="theme-actions-inline">
                                        <button class="btn-theme-action" id="btn-open-marketplace"
                                            title="Theme Marketplace">
                                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <circle cx="9" cy="21" r="1" />
                                                <circle cx="20" cy="21" r="1" />
                                                <path
                                                    d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
                                            </svg>
                                            Marketplace
                                        </button>
                                        <button class="btn-theme-action primary" id="btn-open-customizer"
                                            title="Customize Theme">
                                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <path d="M12 20h9M16.5 3.5a2.12 2.12 0 013 3L7 19l-4 1 1-4L16.5 3.5z" />
                                            </svg>
                                            Customize
                                        </button>
                                    </div>
                                </div>

                                <!-- Horizontal Theme Carousel -->
                                <div class="theme-carousel-container">
                                    <button class="theme-carousel-arrow left" id="theme-carousel-left">
                                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <polyline points="15 18 9 12 15 6" />
                                        </svg>
                                    </button>
                                    <div class="theme-carousel" id="theme-carousel">
                                        <!-- Theme cards will be rendered here by JS -->
                                    </div>
                                    <button class="theme-carousel-arrow right" id="theme-carousel-right">
                                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <polyline points="9 18 15 12 9 6" />
                                        </svg>
                                    </button>
                                </div>
                                <select id="set-theme" style="display:none;">
                                    <!-- Hidden select for compatibility -->
                                </select>
                            </div>

                            <!-- Options Section -->
                            <div class="appearance-section">
                                <h3>Options</h3>
                                <div class="setting-row">
                                    <label>Reduce Animations <span class="tooltip"
                                            title="Disable fancy animations and transitions for smoother experience on low-end devices">?</span></label>
                                    <label class="switch">
                                        <input type="checkbox" id="set-performanceMode" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Template Tab -->
                        <div class="settings-panel" id="panel-template">
                            <h3>Code Template</h3>
                            <p class="setting-desc">Template code for new files. Use this as your starting point.</p>
                            <div class="template-editor">
                                <div id="template-editor-container"></div>
                                <textarea id="set-template" style="display:none"></textarea>
                            </div>
                            <div class="template-actions">
                                <button class="btn-template-reset" id="btn-template-reset">Reset to Default</button>
                            </div>
                        </div>

                        <!-- Keybindings Tab -->
                        <div class="settings-panel" id="panel-keybindings">
                            <h3>Keyboard Shortcuts</h3>
                            <p class="setting-desc">Click on a shortcut to change it. Press Escape to cancel.</p>
                            <div class="keybindings-list" id="keybindings-list">
                                <!-- Keybindings will be rendered by JS -->
                            </div>
                            <div class="keybindings-actions">
                                <button class="btn-keybindings-reset" id="btn-keybindings-reset">Reset to
                                    Defaults</button>
                            </div>
                        </div>

                        <!-- Snippets Tab -->
                        <div class="settings-panel" id="panel-snippets">
                            <h3>Code Snippets</h3>
                            <p class="setting-desc">
                                Create shortcuts for frequently used code. Type the trigger keyword in the editor to
                                insert your snippet.
                            </p>

                            <!-- Enable toggle -->
                            <div class="setting-row" style="margin-bottom: 15px;">
                                <label>Enable Snippets <span class="tooltip"
                                        title="Show snippet suggestions when typing">?</span></label>
                                <label class="switch">
                                    <input type="checkbox" id="set-snippets-enabled" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="setting-group" style="display: block;">
                                <div class="snippets-list-container">
                                    <div id="snippets-list"></div>
                                </div>
                                <button id="btn-add-snippet">
                                    <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19" />
                                        <line x1="5" y1="12" x2="19" y2="12" />
                                    </svg>
                                    Add New Snippet
                                </button>
                            </div>
                        </div>

                        <!-- About Tab -->
                        <div class="settings-panel" id="panel-about">
                            <div style="text-align: center; padding: 20px 0;">
                                <img src="assets/icon.png" alt="Logo"
                                    style="width: 80px; height: 80px; margin-bottom: 10px;">
                                <h3 style="margin: 0; font-size: 24px;">Sameko Dev C++</h3>
                                <p style="opacity: 0.7; margin: 5px 0 20px;">Fast, Modern & Beautiful</p>

                                <div
                                    style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; max-width: 400px; margin: 0 auto; text-align: left;">
                                    <div class="setting-row">
                                        <label>Version</label>
                                        <span class="setting-value" id="about-version">1.0.0</span>
                                    </div>
                                    <div class="setting-row">
                                        <label>Electron</label>
                                        <span class="setting-value" id="about-electron">...</span>
                                    </div>
                                    <div class="setting-row">
                                        <label>Chrome</label>
                                        <span class="setting-value" id="about-chrome">...</span>
                                    </div>
                                    <div class="setting-row">
                                        <label>Node</label>
                                        <span class="setting-value" id="about-node">...</span>
                                    </div>
                                    <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
                                        <button id="btn-check-update" class="action-btn primary"
                                            style="width: auto; padding: 8px 16px;">
                                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none"
                                                stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
                                                <path
                                                    d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.3" />
                                            </svg>
                                            Check for Updates
                                            <span class="badge-dot" id="badge-update-btn"
                                                style="display:none; position:absolute; top:-4px; right:-4px; background:var(--error); width:10px; height:10px; border-radius:50%; border:2px solid var(--bg-secondary);"></span>
                                        </button>
                                        <button id="btn-github" class="action-btn"
                                            style="width: auto; padding: 8px 16px;">
                                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"
                                                style="margin-right: 6px;">
                                                <path
                                                    d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.065 1.815 2.805 1.29 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.527.105-3.176 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405 1.02 0 2.04.135 3 .405 2.28-1.545 3.3-1.23 3.3-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z" />
                                            </svg>
                                            GitHub
                                        </button>
                                    </div>
                                </div>
                                <div style="margin-top: 30px; font-size: 12px; opacity: 0.5;">
                                    &copy; 2025 Sameko Project. All rights reserved.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="settings-footer">
                    <button class="btn-reset" id="btn-reset-settings">Reset to Defaults</button>
                    <button class="btn-save" id="btn-save-settings">Save & Close</button>
                </div>
            </div>
        </div>

        <!-- ===== LOCAL HISTORY MODAL ===== -->
        <div class="local-history-overlay" id="local-history-overlay"></div>
        <div class="local-history-modal" id="local-history-modal">
            <div class="local-history-header">
                <h2 id="local-history-title">Checkpoints</h2>
                <button class="local-history-close" id="local-history-close">&times;</button>
            </div>
            <div class="local-history-content" id="local-history-list">
                <!-- History entries will be rendered here -->
            </div>
            <div class="local-history-footer">
                <button class="btn-history-clear" id="local-history-clear">
                    <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    </svg>
                    Clear All
                </button>
                <span>Tip: Right-click tab to access history</span>
            </div>
        </div>

        <!-- ===== SNIPPET EDITOR MODAL ===== -->
        <div class="snippet-editor-modal" id="snippet-editor-modal">
            <div class="snippet-editor-overlay"></div>
            <div class="snippet-editor-container">
                <div class="snippet-editor-header">
                    <h2 id="snippet-editor-title">Edit Snippet</h2>
                    <button class="btn-close-snippet-editor" id="btn-close-snippet-editor">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div class="snippet-editor-body">
                    <div class="snippet-field">
                        <label for="snippet-trigger-input">Trigger Keyword</label>
                        <input type="text" id="snippet-trigger-input" placeholder="e.g., fori, bfs, dfs..." />
                    </div>
                    <div class="snippet-field">
                        <label for="snippet-content-editor">Snippet Content</label>
                        <div id="snippet-content-editor"
                            style="height: 300px; border: 1px solid var(--border-color); border-radius: 6px; background: #1e1e1e;">
                        </div>
                    </div>
                    <!-- Snippet Tips -->
                    <div class="snippet-tips">
                        <div class="tips-header">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            Mẹo viết Snippet (Smart Template)
                        </div>
                        <div class="tips-content">
                            • <code>${1:ten_bien}</code> : Điểm dừng số 1, nhấn Tab để nhảy tới đây. Có nội dung mặc
                            định.<br>
                            • <code>${2}</code> : Điểm dừng số 2, nhấn Tab lần nữa để tới đây.<br>
                            • <code>${0}</code> : Điểm dừng cuối cùng (thường để giữa cặp ngoặc { }).
                            <div class="tips-examples">
                                <strong>Ví dụ:</strong><br>
                                1. Vòng lặp:
                                <pre>for(int i=0; i<${1:n}; i++) {\n    ${0}\n}</pre>
                                2. Xuất dữ liệu / Vector:
                                <pre>cout<<${1:res}<<"\\n";\nvector<${1:int}> ${2:v};</pre>
                                3. Viết hàm nhanh:
                                <pre>${1:void} ${2:solve}() {\n    ${0}\n}</pre>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="snippet-editor-footer">
                    <button class="btn-secondary" id="btn-cancel-snippet">Cancel</button>
                    <button class="btn-primary" id="btn-save-snippet">Save Snippet</button>
                </div>
            </div>
        </div>

        <!-- ===== THEME MARKETPLACE POPUP ===== -->
        <div class="fullscreen-popup" id="marketplace-popup" style="display:none;">
            <div class="fullscreen-popup-overlay"></div>
            <div class="fullscreen-popup-container">
                <div class="fullscreen-popup-header">
                    <h2>
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="9" cy="21" r="1" />
                            <circle cx="20" cy="21" r="1" />
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
                        </svg>
                        Theme Marketplace
                    </h2>
                    <div class="fullscreen-popup-actions">
                        <button class="btn-secondary" id="btn-import-file">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" />
                            </svg>
                            Import File
                        </button>
                        <button class="btn-secondary" id="btn-import-gist">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor">
                                <path
                                    d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.065 1.815 2.805 1.29 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.527.105-3.176 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405 1.02 0 2.04.135 3 .405 2.28-1.545 3.3-1.23 3.3-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z" />
                            </svg>
                            Import Gist
                        </button>
                        <button class="btn-secondary" id="btn-export-file">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" />
                            </svg>
                            Export
                        </button>
                        <button class="btn-primary" id="btn-create-theme">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19" />
                                <line x1="5" y1="12" x2="19" y2="12" />
                            </svg>
                            Create New
                        </button>
                    </div>
                    <button class="fullscreen-popup-close" id="marketplace-close">×</button>
                </div>
                <div class="fullscreen-popup-body">
                    <div id="marketplace-themes-list" class="marketplace-themes-list">
                        <!-- Themes will be rendered here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== THEME CUSTOMIZER POPUP ===== -->
        <div class="fullscreen-popup" id="customizer-popup" style="display:none;">
            <div class="fullscreen-popup-overlay"></div>
            <div class="fullscreen-popup-container customizer-container">
                <div class="fullscreen-popup-header">
                    <h2>
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z" />
                        </svg>
                        <span id="customizer-title">Theme Customizer</span>
                    </h2>
                    <button class="fullscreen-popup-close" id="customizer-close">×</button>
                </div>
                <div class="fullscreen-popup-body customizer-body">
                    <!-- Left: Live Preview UI -->
                    <div class="customizer-preview-section">
                        <div class="customizer-live-preview" id="customizer-live-preview">
                            <!-- Clickable UI preview will be rendered here -->
                        </div>
                        <div class="customizer-preview-hint">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="12" cy="12" r="10" />
                                <path d="M12 16v-4M12 8h.01" />
                            </svg>
                            Click on any element to customize its color
                        </div>
                    </div>

                    <!-- Right: Controls Panel -->
                    <div class="customizer-controls-section">
                        <div class="customizer-tabs">
                            <button class="customizer-tab active" data-tab="info">Info</button>
                            <button class="customizer-tab" data-tab="colors">UI Colors</button>
                            <button class="customizer-tab" data-tab="editor">Editor</button>
                        </div>
                        <div class="customizer-tab-content" id="customizer-tab-content">
                            <!-- Tab content will be rendered here -->
                        </div>
                    </div>
                </div>
                <div class="fullscreen-popup-footer">
                    <button class="btn-secondary" id="customizer-cancel">Cancel</button>
                    <button class="btn-secondary" id="customizer-reset">Reset</button>
                    <div class="customizer-save-options">
                        <button class="btn-primary" id="customizer-save">Save as New Theme</button>
                        <button class="btn-secondary" id="customizer-overwrite" style="display:none;">Overwrite</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Color Picker Popover -->
        <div class="color-picker-popover" id="color-picker-popover" style="display:none;">
            <div class="color-picker-header">
                <span id="color-picker-label">Color</span>
                <button class="color-picker-close" id="color-picker-close">×</button>
            </div>
            <div class="color-picker-body">
                <input type="color" id="color-picker-input" value="#ffffff">
                <input type="text" id="color-picker-text" value="#ffffff" placeholder="#RRGGBB">
            </div>
            <div class="color-picker-footer">
                <button class="btn-secondary btn-sm" id="color-picker-cancel">Cancel</button>
                <button class="btn-primary btn-sm" id="color-picker-apply">Apply</button>
            </div>
        </div>

        <!-- ===== CONTENT WRAPPER (Explorer + Main) ===== -->
        <div class="content-wrapper">
            <!-- ===== FILE EXPLORER SIDEBAR ===== -->
            <div class="explorer-sidebar" id="explorer-sidebar">
                <div class="explorer-header">
                    <span class="explorer-title">EXPLORER</span>
                    <div class="explorer-actions">
                        <button class="explorer-action-btn" id="btn-refresh-explorer" title="Refresh">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
                            </svg>
                        </button>
                        <button class="explorer-action-btn" id="btn-open-folder" title="Open Folder">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z" />
                                <line x1="12" y1="11" x2="12" y2="17" />
                                <line x1="9" y1="14" x2="15" y2="14" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="explorer-tree" id="explorer-tree">
                    <!-- Tree items rendered by JS -->
                </div>
            </div>
            <div class="explorer-resizer" id="explorer-resizer"></div>

            <!-- ===== MAIN ===== -->
            <div class="main">
                <!-- Welcome -->
                <div class="welcome" id="welcome">
                    <div class="welcome-box">
                        <h1>C++ IDE</h1>
                        <p>Fast & Modern Development</p>
                        <div class="welcome-btns">
                            <button class="welcome-btn" id="welcome-new">
                                <svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2.5">
                                    <path d="M12 5v14M5 12h14" />
                                </svg>
                                New File
                            </button>
                            <button class="welcome-btn" id="welcome-open">
                                <svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2.5">
                                    <path d="M3 7h4l2 2h8a2 2 0 012 2v7a2 2 0 01-2 2H5a2 2 0 01-2-2V7z" />
                                </svg>
                                Open File
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Editor Section with Split support -->
                <div class="editor-section" id="editor-section" style="display:none">
                    <div class="editors-container" id="editors-container">
                        <!-- Primary Editor -->
                        <div class="editor-pane" id="editor-pane-1">
                            <div class="editor-area" id="editor-area">
                                <div id="editor-container"></div>
                            </div>
                        </div>

                        <!-- Split Resizer (hidden by default) -->
                        <div class="resizer-split" id="resizer-split" style="display:none"></div>

                        <!-- Secondary Editor (hidden by default) -->
                        <div class="editor-pane" id="editor-pane-2" style="display:none">
                            <div class="editor-area" id="editor-area-2">
                                <div id="editor-container-2"></div>
                            </div>
                        </div>
                    </div>

                    <div class="resizer-h" id="resizer-problems"></div>

                    <div class="problems-panel hidden" id="problems-panel">
                        <div class="panel-head">
                            <span class="panel-title problems active" data-panel="problems">PROBLEMS</span>
                            <span class="problem-count" id="problem-count">0</span>
                            <span class="panel-title tests" data-panel="tests">TESTS</span>
                            <span class="test-count" id="test-results-count" style="display:none">0/0</span>
                            <button class="run-all-btn" id="btn-run-all-tests" title="Chạy tất cả test (Ctrl+Shift+F11)"
                                style="display:none">
                                <svg viewBox="0 0 24 24" width="12" height="12" fill="currentColor">
                                    <polygon points="5 3 19 12 5 21 5 3" />
                                </svg>
                                Run All
                            </button>
                            <button class="panel-close" id="close-problems" title="Hide">×</button>
                        </div>
                        <div class="problems-body" id="problems-list"></div>
                        <div class="tests-results-body" id="tests-results-list" style="display:none"></div>
                    </div>
                </div>

                <div class="resizer" id="resizer-io"></div>

                <div class="io-section" id="io-section">
                    <div class="io-panel">
                        <div class="panel-head">
                            <span class="panel-title input">INPUT</span>
                            <!-- Test case navigation (hidden by default, shown when problem loaded) -->
                            <div class="test-nav" id="test-nav" style="display:none">
                                <button class="test-nav-btn" id="btn-add-test" title="Thêm test case mới">
                                    <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor"
                                        stroke-width="3">
                                        <line x1="12" y1="5" x2="12" y2="19"></line>
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                    </svg>
                                </button>
                                <button class="test-nav-btn" id="btn-prev-test" title="Test trước">
                                    <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor"
                                        stroke-width="3">
                                        <polyline points="15 18 9 12 15 6" />
                                    </svg>
                                </button>
                                <span class="test-nav-label" id="test-nav-label">1/1</span>
                                <button class="test-nav-btn" id="btn-next-test" title="Test tiếp theo">
                                    <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor"
                                        stroke-width="3">
                                        <polyline points="9 18 15 12 9 6" />
                                    </svg>
                                </button>
                                <button class="test-nav-btn danger" id="btn-delete-test" title="Xóa test case này">
                                    <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor"
                                        stroke-width="3">
                                        <polyline points="3 6 5 6 21 6"></polyline>
                                        <path
                                            d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                        </path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <textarea class="panel-textarea" id="input-area" placeholder="Nhập dữ liệu test..."></textarea>
                    </div>
                    <div class="io-panel">
                        <div class="panel-head">
                            <span class="panel-title output">EXPECTED</span>
                        </div>
                        <textarea class="panel-textarea" id="expected-area"
                            placeholder="Kết quả mong đợi..."></textarea>
                        <div class="diff-display" id="expected-diff" style="display:none"></div>
                    </div>
                </div>

                <div class="resizer" id="resizer-term"></div>

                <div class="terminal-section" id="terminal-section">
                    <div class="panel-head">
                        <span class="panel-title terminal">TERMINAL</span>
                        <button class="clear-btn" id="clear-term" title="Clear">
                            <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" />
                            </svg>
                        </button>
                    </div>
                    <div class="terminal-body" id="terminal"></div>
                    <div class="terminal-input">
                        <span class="prompt"></span>
                        <textarea id="terminal-in" rows="1" placeholder="Input..." disabled></textarea>
                        <button class="send-btn" id="btn-send" disabled title="Send">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div> <!-- End content-wrapper -->

        <!-- Status Bar -->
        <div class="status-bar" id="status-bar">
            <div class="status-left">
                <span class="status-item" id="status"><span class="dot"></span>Ready</span>
            </div>
            <div class="status-right">
                <span class="status-item" id="cursor-pos">Ln 1, Col 1</span>
                <span class="status-item">C++</span>
            </div>
        </div>

    </div>

    <script>var require = { paths: { vs: '../node_modules/monaco-editor/min/vs' } };</script>
    <script src="../node_modules/monaco-editor/min/vs/loader.js"></script>
    <script src="js/cpp-suggestions.js"></script>
    <script src="js/snippet-editor.js"></script>
    <script src="js/ui/color-registry.js"></script>
    <script src="js/ui/theme-manager.js"></script>
    <script src="js/ui/theme-marketplace.js"></script>
    <script src="js/ui/theme-customizer.js"></script>
    <script src="js/local-history.js"></script>
    <script src="js/file-explorer.js"></script>
    <script src="js/app.js"></script>
</body>

</html>